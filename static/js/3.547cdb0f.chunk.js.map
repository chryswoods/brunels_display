{"version":3,"sources":["components/BioOverlay.js","components/Overlay.js","model/Affiliation.js","model/Affiliations.js","model/Business.js","model/WeightPath.js","model/KeyDate.js","model/Businesses.js","model/Position.js","model/Positions.js","model/Project.js","model/Projects.js","model/ScoringFunctions.js","model/SizingFunctions.js","model/Sources.js","model/Source.js","components/ForceGraph.js","components/Popover.js","components/d3/ForceGraph.d3.js","components/d3/force_spiral.js","components/ForceGraph.module.css","components/ShipSelector.js","components/LabelButton.js","components/HowDoIOverlay.js","components/AboutOverlay.js","components/KeyDatesBox.js","components/MainMenu.js","components/PlayPause.js","components/SearchBar.js","components/ShipOverlay.js","components/SlidingPanel.js","components/WarningOverlay.js","model/Biographies.js","model/Connection.js","model/Connections.js","model/KeyDates.js","model/Note.js","model/Notes.js","model/People.js","model/Person.js","model/Social.js","components/TextButton.module.css","components/BigBox.module.css","components/VBox.module.css","components/HBox.module.css","components/Popover.module.css","images/uob_logo.png","images/network.png","images/bi_logo.png","components/ShipSelector.module.css","components/LabelButton.module.css","components/HowDoIOverlay.module.css","../src sync /^/.//.*$","SocialApp.module.css","components/AboutOverlay.module.css","components/AboutOverlay.test.js","SocialApp.js","components/BioOverlay.module.css","components/KeyDatesBox.module.css","components/MainMenu.module.css","components/Overlay.module.css","components/OverlayWrapper.js","components/PlayPause.module.css","components/SearchBar.module.css","components/ShipOverlay.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/TextButton.test.js","components/ToggleButton.js","components/ToggleButton.module.css","components/WarningOverlay.module.css","gb_text.md","ge_text.md","gw_text.md","help_text.md","model/Affiliations.test.js","model/Businesses.test.js","model/DateRange.test.js","model/Positions.test.js","model/Projects.test.js","model/RoughDate.test.js","model/Source.test.js","model/Errors.js","model/DateRange.js","components/BigBox.js","components/VBox.js","components/HBox.js","components/__snapshots__/Overlay.test.js.snap","components/__snapshots__/ShipSelector.test.js.snap","images/bg-128-168.jpg","images/engine_shed.jpg","images/people/Brunel.jpg","images/people/Bryan_Donkin.jpg","images/people/Christopher_Claxton.jpg","images/people/Edward_Chappel.jpg","model/RoughDate.js","images/people/John_Grantham.jpg","images/people/John_Scott.jpg","images/people/Robert_Bright.jpg","images/people/Samuel_Hall.jpg","images/people/Thomas_Guppy.jpg","images/people/William_Fairbairn.jpg","images/people/William_Patterson.jpg","images/people/William_Symonds.jpg","images/ships/Great_Britain.jpg","images/ships/Great_Eastern.jpg","model/get_id.js","images/ships/Great_Western.jpg","images/ssgb_logo.png","components/TextButton.js"],"names":["BioOverlay","props","social","person","get","id","getID","name","getName","bio","getBiographies","getByID","replace","sources","seen","Object","keys","getSources","forEach","key","item","source","push","getConnections","getConnectionsInvolving","connection","getAffiliationSources","getCorrespondanceSources","source_parts","length","className","styles","source_item","source_name","getDescription","container","onClick","close","content","Overlay","useState","React","open","setOpen","style","overlay","useBackground","overlayNoBackground","data-testid","toggleOverlay","e","stopPropagation","children","defaultProps","setState","val","def","Affiliation","this","state","notes","_getHook","_isAAffiliationObject","canonical","makeCanonical","ValueError","hook","value","c","lodash","cloneDeep","trim","toLowerCase","unDry","Dry","registerClass","_generate_affiliation_uid","uid","uuidv4","substring","Affiliations","registry","_names","_isAAffiliationsObject","_updateHooks","names","sort","output","affiliation","canAdd","existing","getByName","error","console","merge","clone","KeyError","MissingError","results","indexOf","affiliations","v","_filterProject","values","project","ret","Business","projects","positions","scores","weight","weight_path","is_highlighted","is_selected","_isABusinessObject","group","ids","index","keydate","getWeightPath","getWeightAtDate","nsources","s","source_id","includes","nprojects","new_projects","business","window","_isADateRangeObject","DateRange","dates","intersect","_filterWindow","project_id","WeightPath","parts","split","n","join","projectID","i","position","getCanonical","label","title","initials","getInitials","shape","location","getLocation","highlighted","getHighlighted","selected","getSelected","getWeight","type","start_weight","start_date","weight_change","date_change","_isAWeightPathObject","getStartWeight","d","getStartDate","KeyDate","isLater","getDateChange","getWeightChange","parseFloat","description","month","_isAKeyDateObject","other","_generate_business_uid","Businesses","_isABusinessesObject","load","setSelected","setHighlighted","isNonContributingEngineer","businesses","connections","nConnections","funcs","items","timeline","getTimeLine","anchor","nodes","node","getNode","is_anchor","data","array","element","add","Position","_isAPositionObject","_generate_position_uid","Positions","_isAPositionsObject","_isApositionObject","Project","url","duration","_isAProjectObject","getDuration","hasBounds","start","getEarliestStart","toDate","end","getLatestEnd","start_time","toMoment","end_time","_generate_project_uid","Projects","_isAProjectsObject","score_by_influence","edges","getAnchor","anchor_id","get_id","score","edge_count","areConnected","x","y","sort_index","score_by_connections","size_by_weight","size","size_by_influence","min_size","max_size","size_by_connections","_generate_source_uid","Sources","_isASourcesObject","Source","_isASourceObject","log","date","force","RoughDate","_isARoughDateObject","isNull","getDate","ne","remove_page_numbers","ForceGraph","popup","show_logos","updateSize","bind","emitPopup","clearPopup","componentDidUpdate","containerRef","createRef","graph","ForceGraphD3","addEventListener","removeEventListener","draw","containerRect","current","getBoundingClientRect","width","height","update","drawFromScratch","emitSetCenter","emitReadMore","logos","left_logo","src","require","alt","uob_logo_image","qr_logo","qr_logo_image","right_logo","bi_logo_image","ref","Component","Popover","readMoreButton","centerButton","isAnchor","left","top","innerWidth","innerHeight","popOver","popoverWidth","header","closeButton","background","border","_null_function","constrain","w","r","isNaN","getTextSize","context","_canvas","document","createElement","getContext","font","text","use_initials","measureText","parent","updateLink","updateNodeText","updateNode","updateGraph","drag","signalClicked","indirectConnectionsVisible","hideUnconnectedNodes","slice","_size_changed","_graph_changed","_is_running","_is_drawn","find","gotConnections","h","new_graph","getGraph","l","edge","found_source","found_target","target","target_id","old_graph","_graph","new_node","found","m","old_node","vx","vy","Math","random","size_changed","prototype","hasOwnProperty","call","simulation","_simulation","d3","on","fx","fy","restart","fixed","_mainGroup","select","selectAll","enter","append","attr","radius","node_selected","node_bristol_highlighted","node_bristol","node_bath_highlighted","node_bath","node_london_highlighted","node_london","node_highlighted","node_text_select","node_text_highlight","node_text","link","any_highlighted","link_highlight","linkInvisible","stop","alpha","alphaTarget","alphaDecay","force_spiral","strength","_link","undefined","dx","dy","dr","sqrt","_node","_label","textSize","delta","remove","mainGroup","svg_view","spiralSimulation","_constant","_return_index","j","strengths","indexes","points_x","points_y","initialize","Array","floor","max_index","max","angle","min_x","max_x","min_y","max_y","asin","cos","sin","min","point_x","point_y","center_x","center_y","scale_x","scale_y","_","arguments","module","exports","ShipButton","ship","ship_button","func","emitSetShip","ship_button_selected","emitShowShip","href","ShipSelector","ssGW","ssGB","ssGE","ships","buttons","slotSetShip","LabelButton","button","HowDoIOverlay","markdown","getHelpText","fontSize","image","AboutOverlay","textContainer","intro","aboutText","introBody","sectionHeader","body","KeyDatesBox","getKeyDates","getSortedDates","max_val","box","sliderbox","onChange","signalSetDateIndex","textbox","saveSvgAsPng","MenuLabel","menu_label","MenuButton","menu_button","MainMenu","wrapperRef","setWrapperRef","handleClickOutside","event","contains","unconnectedNodesText","unconnectedNodesVisible","ncEngineersText","ncEngineersVisible","panel","emitToggleSpiralOrder","spiralOrder","emitToggleNodeSize","sizeText","emitToggleFilter","filterText","emitToggleUnconnectedNodesVisible","emitToggleNCEngineersVisible","emitToggleSearch","searchText","emitResetFilters","filename","moment","format","getElementById","scale","encoderOptions","backgroundColor","PlayPause","isActive","signalPlay","signalPause","toggle","SearchBar","emitUpdate","preventDefault","search_text","clear_button","link_button","clearButton","searchHighlightAvailable","highlight","searchHighlightToggled","link_style","linkButton","linkButtonHighlighted","emitSearchHighlightToggled","form","onSubmit","onSubmitHandler","input","onChangeHandler","placeholder","ShipOverlay","getProjectText","getImage","SlidingPanel","isOpen","defaultSize","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","maxWidth","maxHeight","SlideFromBottom","bottomContainer","topContainer","SlideFromTop","leftContainer","SlideFromLeft","in","timeout","classNames","unmountOnExit","WarningOverlay","Biographies","bios","_isABiographiesObject","biography","_mergeSources","Connection","n0","n1","shared","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","nProjects","correspondences","weights","getNode0Name","getNode1Name","color","getColorFromType","_generate_connection_uid","Connections","_connections","_isAConnectionsObject","connection_id","id0","getNode0ID","id1","getNode1ID","conns","nnodes","_add","item0","item1","areNodesVisible","toEdge","_generate_keydate_uid","KeyDates","_isAKeyDatesObject","_sorted_dates","date_index","sorted_dates","getNames","a","b","parseInt","num_dates","getNumDates","NaN","keydates","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","_generate_person_uid","_rand_int","People","_isAPeopleObject","Person","_isAPersonObject","people","npeople","idx","splice","titles","firstnames","surnames","suffixes","alive","gender","orig_name","match_and","getAlive","part","getTitle","getFirstName","getSurname","getSuffix","getStart","getEnd","projectKey","getProjectID","is_nc_engineer","is_engineer","isEngineer","_push","list","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","scoring_function","sizing_function","filter_unconnected","filter_nc_engineers","images","default_image","project_text","help_text","_rebuilding","_isASocialObject","getHook","biographies","credit","clearCache","getByIndex","filterKeyDate","node_filter","getConnectionsTo","group_filter","inGroup","getWindow","hasStart","hasEnd","filterWindow","project_filter","filterProject","source_filter","filterSource","new_window","getDelta","getEndDate","fitted","_fitWindow","setWindow","eq","getPeople","selectAtRandom","filtered","getNodeFilters","getEdgeFilters","f","_getType","clearHighlights","getBusinesses","clearSelections","include_bios","highlight_links","result","search","highlightConnections","highlight_connections","clear_previous","getPositions","getAffiliations","projectFilter","got_anchor","isString","isArray","category","args","toggleFilter","getProjects","getNodes","concat","getEdges","counts","add_count","count","getScoringFunction","getSizingFunction","added","getNotes","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","afterEach","cleanup","describe","test","closeFn","jest","fn","render","closebutton","screen","queryByText","fireEvent","click","expect","toHaveBeenCalled","queryAllByText","toBeTruthy","SocialApp","parse","graphData","highlighted_item","selected_item","filterUnconnectedNodes","filterNCEngineers","commercialFiltered","engineersFiltered","nodeSize","commercialNodeFilter","engineerNodeFilter","connectedNodes","selectedShip","selectedShipID","isOverlayOpen","searchIncludeBios","searchHighlightLinks","menuVisible","warningVisible","imageData","setImage","gwr","spiralOrders","freeze","Influence","nodeSizes","setSizingFunction","findInvestorsAndEngineers","setScoringFunction","slotSetDateIndex","socialGraph","setAnchor","setOverlay","closeOverlay","setFilter","setDefaultImage","searchWasItem","selectSearchMatching","resetAllFilters","filterNonContributingEngineers","slotToggleFilterCommercial","slotToggleFilterEngineer","selectedPerson","cachedSearch","performSearch","entity","namedPosition","positionGroups","positionID","order","setSpiralOrder","setNodeSize","overlayItem","toggled","wrapIndex","setKeyDateFilter","frame_count","slotClicked","slotReadMore","interval","setInterval","nextFrame","clearInterval","reload","slotSetAnchor","ui_main","fullscreen","slotPlay","slotPause","OverlayWrapper","sourceButtonText","socialSources","sourceIDs","isBioOverlayOpen","toggleSourceOverlay","it","testFn","toBeInTheDocument","closest","ToggleButton","emitToggled","untoggled","name1","p1","name2","p2","toStrictEqual","p","stringify","toString","union","url1","url2","getURL","getEarliest","getLatest","m1","toDateRange","m2","DuplicateError","_clean","both","isInstant","getStartString","getEndString","toSimpleString","my_start","other_start","gt","my_end","other_end","lt","tmp","BigBox","bigbox","_wrap","child","VBox","vbox","HBox","hbox","_toDate","_isAMomentObject","isValid","_get_min","d1","d2","_get_max","raw","toISOString","isFuzzy","getMonth","getFullYear","isExact","s1","s2","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","TextButton"],"mappings":"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","file":"static/js/3.547cdb0f.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport \"react-tabs/style/react-tabs.css\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./BioOverlay.module.css\";\n\nfunction BioOverlay(props) {\n  let social = props.social;\n\n  const person = social.get(props.person);\n  const id = person.getID();\n  const name = person.getName();\n  const biographies = props.social.getBiographies();\n\n  // Get biography and strip name\n  let bio = biographies.getByID(id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  }\n\n  bio = bio.replace(name + \". \", \"\");\n\n  let sources = [];\n  let seen = {};\n\n  Object.keys(person.getSources()).forEach((key) => {\n    person.getSources()[key].forEach((item) => {\n      if (!seen[item]) {\n        let source = social.get(item);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[item] = 1;\n      }\n    });\n  });\n\n  let connections = social.getConnections().getConnectionsInvolving(person);\n\n  connections.forEach((connection) => {\n    Object.keys(connection.getAffiliationSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n\n    Object.keys(connection.getCorrespondanceSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n  })\n\n  let source_parts = [];\n\n  if (sources.length > 0) {\n    sources.forEach((source) => {\n      //console.log(source);\n      source_parts.push(\n        <li key={source.getID()}\n          className={styles.source_item}>\n          <span className={styles.source_name}>{source.getName(true)}</span>&nbsp;\n          {source.getDescription()}\n        </li>\n      );\n    })\n  } else {\n    source_parts.push(<li key=\"source\"\n                          className={styles.source_item}>No sources</li>);\n  }\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div>\n        <div>\n            <BigBox><div className={styles.name}>{person.getName()}</div></BigBox>\n        </div>\n      </div>\n      <div className={styles.content}>\n        <div>\n          <div className={styles.bio}>{bio}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nBioOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  person: PropTypes.string.isRequired,\n};\n\nexport default BioOverlay;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./Overlay.module.css\";\n\n// Based on https://stackoverflow.com/a/55003301\nfunction Overlay(props) {\n  const { useState } = React;\n  const [open, setOpen] = useState(true);\n  if (open) {\n    let style = styles.overlay;\n\n    if (!props.useBackground) {\n      style = styles.overlayNoBackground;\n    }\n\n    return (\n      <div\n        data-testid=\"overlay\"\n        className={style}\n        onClick={() => {\n          props.toggleOverlay();\n          setOpen(false);\n        }}\n      >\n        <div\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n  return null;\n}\n\nOverlay.defaultProps = {\n  useBackground: true,\n};\n\nexport default Overlay;\n\nOverlay.propTypes = {\n  toggleOverlay: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n  useBackground: PropTypes.bool,\n};\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport WeightPath from \"./WeightPath\";\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      positions: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n      weight: {},\n      weight_path: {},\n      is_highlighted: false,\n      is_selected: false,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterKeyDate(keydate){\n    const weightpath = this.getWeightPath();\n\n    let weight = weightpath.getWeightAtDate(keydate);\n\n    if (weight <= 0.0){\n      return null;\n    }\n\n    this.state.weight = weight;\n\n    return this;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let weight = _filterProject(this.state.weight, project);\n    let sources = _filterProject(this.state.sources, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n        weight !== this.state.weight || sources !== this.state.sources) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business.state.sources = sources;\n      business.state.weight = weight;\n      business.state.projects = new_projects;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterProject(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.positions = setState(state.positions, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n      this.state.weight_path = setState(state.weight_path, {});\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getWeight(project_id = null) {\n    let weight = this.state.weight;\n\n    if (weight === null){\n      weight = 5.0;\n    }\n\n    return weight;\n  }\n\n  getWeightPath(project_id = null) {\n    if (project_id === null) {\n      // use the first project's weight\n      project_id = Object.keys(this.state.weight_path)[0];\n    }\n\n    const weight_path = this.state.weight_path[project_id];\n\n    if (!weight_path){\n      return new WeightPath();\n    }\n\n    return weight_path;\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.name.split(\" \").forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getPositions() {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  isNonContributingEngineer(project_id = null) {\n    if (project_id === null) {\n      // return this status with the first project\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical();\n      if (name.includes(\"non-cont\")) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"square\",\n      location: this.getWeightPath().getLocation(),\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      weight: this.getWeight(),\n      type: \"business\",\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\nimport KeyDate from \"./KeyDate\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass WeightPath {\n  constructor(props) {\n    this.state = {\n      id: null,\n      start_weight: null,\n      start_date: null,\n      weight_change: null,\n      date_change: null,\n      location: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAWeightPathObject = true;\n  }\n\n  static clone(item) {\n    let c = new WeightPath();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getStartWeight() {\n    if (!this.state.start_weight){\n      return 0.0;\n    } else {\n      return this.state.start_weight;\n    }\n  }\n\n  getStartDate() {\n    return this.state.start_date;\n  }\n\n  getWeightChange() {\n    if (!this.state.weight_change){\n      return 0.0;\n    } else {\n      return this.state.weight_change;\n    }\n  }\n\n  getDateChange() {\n    return this.state.date_change;\n  }\n\n  getLocation() {\n    return this.state.location;\n  }\n\n  getWeightAtDate(keydate){\n    if (!keydate){\n      return this.getStartWeight();\n    }\n\n    let d = this.getStartDate();\n\n    if (d === null){\n      return this.getStartWeight();\n    }\n\n    d = new KeyDate({name: d});\n\n    if (d.isLater(keydate)){\n      return 0.0;\n    } \n    \n    d = this.getDateChange();\n\n    if (d === null){\n      return this.getStartWeight();\n    }\n\n    d = new KeyDate({name: d});\n\n    if (d.isLater(keydate)) {\n      return this.getStartWeight();\n    } else { \n      return this.getStartWeight() + this.getWeightChange();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.start_weight = setState(parseFloat(state.start_weight), 1.0);\n      this.state.start_date = setState(parseFloat(state.start_date), null);\n      this.state.weight_change = setState(parseFloat(state.weight_change), 0.0);\n      this.state.date_change = setState(parseFloat(state.date_change), null);\n      this.state.location = setState(state.location, null);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `WeightPath(${this.getStartWeight()}-${this.getStartDate()})`;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nWeightPath.unDry = function (value) {\n  return new WeightPath(value);\n};\n\nDry.registerClass(\"WeightPath\", WeightPath);\n\nexport default WeightPath;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass KeyDate {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      description: null,\n      month: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAKeyDateObject = true;\n  }\n\n  static clone(item) {\n    let c = new KeyDate();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description, \"\");\n      this.state.month = setState(state.month, null);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a KeyDate without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  isLater(other){\n    return parseFloat(other.getName()) < parseFloat(this.getName());\n  }\n\n  toString() {\n    return `KeyDate(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  getMonth() {\n    return this.state.month;\n  }\n\n \n  toDry() {\n    return { value: this.state };\n  }\n}\n\nKeyDate.unDry = function (value) {\n  return new KeyDate(value);\n};\n\nDry.registerClass(\"KeyDate\", KeyDate);\n\nexport default KeyDate;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filterNonContributingEngineers() {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (!business.isNonContributingEngineer()){\n        registry[key] = business;\n        names[business.getName()] = key;\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let business = this.state.registry[key];\n        registry[key] = business;\n        names[business.getName()] = key;\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw new ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Position(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getCanonical() {\n    return this.state.canonical;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPosition.unDry = function (value) {\n  return new Position(value);\n};\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_position_uid() {\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length - 7);\n}\n\nclass Positions {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  items() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Position || item._isAPositionObject;\n  }\n\n  add(position) {\n    if (!this.canAdd(position)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(position.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    } else {\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No position with name ${name}`);\n    }\n  }\n\n  getNameByID(id) {\n    return this.get(id).getName();\n  }\n\n  find(name) {\n    if (name instanceof Position || name._isApositionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n  }\n\n  get(id) {\n    let position = this.state.registry[id];\n\n    if (!position) {\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPositions.unDry = function (value) {\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n};\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      description: null,\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item) {\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({ value: state.duration });\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Project(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getURL() {\n    return this.state.url;\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  getTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start: duration.getEarliestStart().toDate(),\n        end: duration.getLatestEnd().toDate(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getNewTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start_time: duration.getEarliestStart().toMoment(),\n        end_time: duration.getLatestEnd().toMoment(),\n        project_id: this.getID(),\n        title: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProject.unDry = function (value) {\n  return new Project(value);\n};\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  projects() {\n    return this._names;\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import get_id from \"./get_id\";\n\n/** Score by the influence of each node */\nfunction score_by_influence(nodes, edges, social) {\n  let scores = [];\n\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.weight + node.edge_count / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\n/** Score by the number of connections only */\nfunction score_by_connections(nodes, edges, social) {\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  let scores = [];\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.edge_count + node.weight / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  // sort the scores such that the most connected nodes are first\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\nexport {\n  score_by_connections as default,\n  score_by_connections,\n  score_by_influence\n};\n","\n/** Just give each node its size according to its weight */\nfunction size_by_weight(nodes, edges, social) {\n  nodes.forEach((node) => {\n    let size = node.weight;\n    node.size = size;\n  });\n}\n\n/** Size each node by the influence of each node. Calculates the\n *  weight for a node and returns it\n */\nfunction size_by_influence(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.weight;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\n/** Size each node by the number of connections only */\nfunction size_by_connections(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.edge_count;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\nexport {\n  size_by_connections as default,\n  size_by_connections,\n  size_by_influence,\n  size_by_weight,\n};\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      console.error(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName(remove_page_numbers = false) {\n    if (remove_page_numbers) {\n      let name = this.state.name;\n\n      if (name === \"BRSGB-2015.03016\") {\n        // this is correct\n        return name;\n      }\n\n      if (name.includes(\"-\")) {\n        name = name.split(\"-\")[0];\n      }\n\n      if (name.includes(\",\")) {\n        name = name.split(\",\")[0];\n      }\n\n      return name;\n    }\n    else {\n      return this.state.name;\n    }\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport Popover from \"./Popover\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\n\nimport styles from \"./ForceGraph.module.css\";\n\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      popup: null,\n      show_logos: true,\n    };\n\n    this.updateSize = this.updateSize.bind(this);\n    this.emitPopup = this.emitPopup.bind(this);\n    this.clearPopup = this.clearPopup.bind(this);\n    this.componentDidUpdate = this.componentDidUpdate.bind(this);\n\n    this.containerRef = React.createRef();\n\n    this.graph = new ForceGraphD3(this, props);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this.graph.emitPopup = this.emitPopup;\n    this.graph.clearPopup = this.clearPopup;\n    this.graph.draw();\n  }\n\n  updateSize() {\n    const containerRect = this.containerRef.current.getBoundingClientRect();\n\n    if (this.containerRef && this.graph) {\n      let width = containerRect.width;\n      let height = containerRect.height;\n\n      let show_logos = (width >= 768);\n\n      this.setState({show_logos: show_logos});\n\n      this.graph.update({\n        width: width,\n        height: height\n      });\n      this.graph.drawFromScratch();\n    }\n  }\n\n  emitPopup(node) {\n    this.setState({ popup: node });\n  }\n\n  clearPopup() {\n    this.setState({ popup: null });\n  }\n\n  render() {\n    this.graph.update(this.props);\n\n    let popup = null;\n\n    if (this.state.popup) {\n      let node = this.state.popup;\n\n      popup = <Popover\n        node={node}\n        social={this.props.social}\n        clearPopup={this.clearPopup}\n        emitSetCenter={this.props.emitSetCenter}\n        emitReadMore={this.props.emitReadMore}\n      />;\n    }\n\n    let logos = null;\n\n    if (this.state.show_logos){\n      logos = (\n        <div>\n           <div className={styles.left_logo}>\n            <img src={require(\"../images/uob_logo.png\")}\n                 alt=\"University of Bristol Logo\"\n                 className={styles.uob_logo_image}\n            />\n          </div>\n          <div className={styles.qr_logo}>\n            <img src={require(\"../images/network.png\")}\n                 alt=\"QR code for URL - fill in later\"\n                 className={styles.qr_logo_image}\n            />\n          </div>\n          <div className={styles.right_logo}>\n            <img src={require(\"../images/bi_logo.png\")}\n                 alt=\"Bristol Institute Logo\"\n                 className={styles.bi_logo_image}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div ref={this.containerRef} className={styles.container}>\n        {logos}\n        <div className={this.graph.className()}>\n          {popup}\n        </div>\n      </div>\n    );\n  }\n}\n\nForceGraph.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default ForceGraph;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TextButton from \"./TextButton\";\n\nimport VBox from \"./VBox\";\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./Popover.module.css\";\n\n\nfunction _truncate(str) {\n  const array = str.trim().split(\".\");\n  return array[0] + \"...\";\n}\n\n\nfunction Popover(props) {\n  const node = props.node;\n\n  const name = node.label;\n  const social = props.social;\n\n  let readMoreButton = null;\n\n  if (props.emitReadMore) {\n    readMoreButton = (\n      <TextButton\n        onClick={() => {\n          props.clearPopup();\n          props.emitReadMore(node.id);\n        }}\n      >\n        Read more\n      </TextButton>\n    );\n  }\n\n  let centerButton = null;\n\n  if (props.emitSetCenter) {\n    if (social.isAnchor(node.id)) {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(null);\n          }}\n        >\n          Clear center\n        </TextButton>\n      );\n    }\n    else {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(node.id);\n          }}\n        >\n          Make center\n        </TextButton>\n      );\n    }\n  }\n\n  // Get biography for node\n  let bio = social.getBiographies().getByID(node.id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  } else {\n    bio = bio.replace(name + \".  \", \"\");\n    bio = _truncate(bio);\n  }\n\n  // Get the location of the click within the viewport so we can open the popover\n  // in the correct location\n  const innerWidth = window.innerWidth; // px\n  const innerHeight = window.innerHeight; // px\n\n  const popoverHeight = 170;\n  const popoverWidth = 200;\n\n  let left;\n  if (node.x > innerWidth - popoverWidth) {\n    left = node.x - popoverWidth;\n  } else {\n    left = node.x;\n  }\n\n  if (left < 10) {\n    left = 10;\n  }\n\n  left = left + \"px\";\n\n  let top;\n  if (node.y > innerHeight - popoverHeight) {\n    top = node.y - popoverHeight + 50;\n\n    if (top < 50) { top = 50; }\n  } else {\n    top = node.y;\n  }\n\n  if (innerHeight < 350) {\n    top = 20;\n  }\n  else if (top > innerHeight - 50 - popoverHeight) {\n    top = innerHeight - 50 - popoverHeight;\n  }\n\n  top = top + \"px\";\n\n  return (\n    <div\n      className={styles.popOver}\n      style={{\n        top: top, left: left,\n        width: popoverWidth + \"px\"\n        }}\n    >\n      <VBox>\n        <HBox>\n          <BigBox><div className={styles.header}>{name}</div></BigBox>\n          <div className={styles.closeButton}>\n            <button onClick={props.clearPopup}\n                    style={{ background: \"none\", border: \"none\" }}>\n              x\n            </button>\n          </div>\n        </HBox>\n        <BigBox>\n          <div className={styles.bio}>{bio}</div>\n        </BigBox>\n        <HBox>\n          {readMoreButton}\n          <div>&nbsp;</div>\n          {centerButton}\n        </HBox>\n      </VBox>\n    </div>\n  );\n}\n\nPopover.propTypes = {\n  social: PropTypes.object.isRequired,\n  node: PropTypes.object.isRequired,\n  clearPopup: PropTypes.func.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default Popover;\n","\nimport * as d3 from \"d3\";\n\nimport React from \"react\";\n\nimport lodash from \"lodash\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\n\nimport force_spiral from \"./force_spiral.js\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  if (isNaN(x)) {\n    return 0.5 * w;\n  }\n  else {\n    if (x < r) { return r; }\n    else if (x > w - r) { return w - r }\n    else { return x; }\n  }\n}\n\nfunction getTextSize(d) {\n  let canvas = getTextSize._canvas || (getTextSize._canvas = document.createElement(\"canvas\"));\n  let context = canvas.getContext(\"2d\");\n\n  let height = 12;\n\n  if (d.selected) {\n    context.font = \"12pt Domine\";\n  } else {\n    context.font = \"8pt Domine\";\n    height = 8;\n  }\n\n  let text = d.label;\n\n  if (d.use_initials) {\n    text = d.initials;\n  }\n\n  let metrics = context.measureText(text);\n\n  return [metrics.width, height];\n}\n\n/* eslint-disable react/no-direct-mutation-state */\nclass ForceGraphD3 extends React.Component {\n  constructor(parent, props) {\n    super(props);\n    this.updateLink = this.updateLink.bind(this);\n    this.updateNodeText = this.updateNodeText.bind(this);\n    this.updateNode = this.updateNode.bind(this);\n    this.draw = this.draw.bind(this);\n    this.drawFromScratch = this.drawFromScratch.bind(this);\n    this.update = this.update.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n\n    this.drag = this.drag.bind(this);\n    this.parent = parent;\n\n    // Generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      signalClicked: _null_function,\n      indirectConnectionsVisible: false,\n      hideUnconnectedNodes: false,\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n    this._is_drawn = false;\n\n    this.update(props);\n  }\n\n  getNodeBio(id) {\n    return this.state.social.getBiographies().getByID(id);\n  }\n\n  getNodeConnections(id) {\n    return this.state.social.getConnections().find(id);\n  }\n\n  gotConnections(id) {\n    return this.state.social.getConnections().gotConnections(id);\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let new_graph = null;\n\n    if (social) {\n      new_graph = social.getGraph();\n    }\n\n    // The social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (new_graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = new_graph;\n\n      // This view needs to clone its own copy of the graph, as\n      // D3 will update the graph object. We need to clone in case\n      // two ForceGraph.d3 views are viewing the same Social graph\n      new_graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in new_graph.edges) {\n        let edge = new_graph.edges[l];\n\n        let found_source = false;\n        let found_target = false;\n\n        for (let n in new_graph.nodes) {\n          let node = new_graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = node;\n            edge.source_id = node.id;\n            found_source = true;\n          } else if (edge.target === node.id) {\n            edge.target = node;\n            edge.target_id = node.id;\n            found_target = true;\n          }\n\n          if (found_source && found_target) { break; }\n        }\n      }\n\n      // does this node already have coordinates? If not then they\n      // will need to be random\n      let old_graph = this._graph;\n\n      if (!old_graph) {\n        old_graph = { nodes: [] };\n      }\n\n      for (let n in new_graph.nodes) {\n        let new_node = new_graph.nodes[n];\n        let found = false;\n\n        for (let m in old_graph.nodes) {\n          let old_node = old_graph.nodes[m];\n          if (old_node.id === new_node.id) {\n            new_node.x = old_node.x;\n            new_node.y = old_node.y;\n            new_node.vx = old_node.vx;\n            new_node.vy = old_node.vy;\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          new_node.x = w * Math.random();\n          new_node.y = h * Math.random();\n          new_node.vx = 0.0;\n          new_node.vy = 0.0;\n        }\n      }\n\n      this._graph = new_graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (props.indirectConnectionsVisible !== this.state.indirectConnectionsVisible) {\n      this.state.indirectConnectionsVisible = props.indirectConnectionsVisible;\n      this._graph_changed = true;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        // this.setState({ width: props.width });\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        // this.setState({ height: props.height });\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n      } else {\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  drag() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        let w = this.state.width;\n        let h = this.state.height;\n\n        d.fx = constrain(d3.event.x, w, d.r);\n        d.fy = constrain(d3.event.y, h, d.r);\n      })\n      .on(\"end\", (d) => {\n        if (!d.fixed) {\n          d.fx = null;\n          d.fy = null;\n        }\n      });\n  }\n\n  updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\")\n      )\n      // Here size is the weight given to that entity\n      .attr(\"r\", (d) => {\n        d.radius = d.size; //Math.min(15, 5 + (0.5 * (d.size * d.size)));\n\n        if (d.size < 1.5) {\n          //d.radius = 3;\n        }\n        else if (d.size < 2.0) {\n          //d.radius = 6 + d.size;\n        } else {\n          //d.radius = 12 + 2 * d.size;\n        }\n        return d.radius;\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node ${styles.node_selected} selected`;\n        }\n        else if (d.location === \"Bristol\") {\n          if (d.highlighted) {\n            return `node ${styles.node_bristol_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_bristol}`;\n          }\n        }\n        else if (d.location === \"Bath\") {\n          if (d.highlighted) {\n            return `node ${styles.node_bath_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_bath}`;\n          }\n        }\n        else if (d.location === \"London\") {\n          if (d.highlighted) {\n            return `node ${styles.node_london_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_london}`;\n          }\n        }\n        else {\n          if (d.highlighted) {\n            return `node ${styles.node_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => { return d.id; })\n      .on(\"mousedown\", () => d3.event.stopPropagation())\n      .on(\"click\", (d) => {\n        d3.event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      });\n    //.call(this.drag());\n\n    return node;\n  }\n\n  updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    let use_initials = true;\n\n    //console.log(`${this.state.width} : ${data.length}`);\n\n    if (data.length < 10) {\n      use_initials = false;\n    }\n    else if (data.length < 25 && this.state.width > 500) {\n      use_initials = false;\n    }\n    else if (data.length < 40 && this.state.width > 768) {\n      use_initials = false;\n    }\n    else if (data.length < 45 && this.state.width > 1000) {\n      use_initials = false;\n    }\n    else if (data.length < 50 && this.state.width > 1200) {\n      use_initials = false;\n    }\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\"),\n      )\n      .text((d) => {\n        d.use_initials = false;\n\n        if (d.highlighted || d.selected) {\n          return d.label;\n        }\n        else {\n          if (use_initials) {\n            d.use_initials = true;\n            return d.initials;\n          }\n          else {\n            return d.label;\n          }\n        }\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node_text ${styles.node_text_select} selected`;\n        }\n        else if (d.highlighted) {\n          return `node_text ${styles.node_text_highlight} highlighted`;\n        }\n        else {\n          return `node_text ${styles.node_text}`;\n        }\n      })\n      .attr(\"dx\", (d) => {\n        return d.radius + \"px\";\n      })\n      .attr(\"dy\", (d) => {\n        return -1 * (3 + sizeScale * d.radius) + \"px\";\n      })\n      .attr(\"textSize\", (d) => {\n        return getTextSize(d);\n      })\n      .on(\"mousedown\", () => d3.event.stopPropagation())\n      .on(\"click\", (d) => {\n        d3.event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      })\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"id\", (d) => { return d.id; });\n    //.call(this.drag());\n\n    return text;\n  }\n\n  updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    let any_highlighted = false;\n\n    data.forEach((item) => {\n      if (item.highlighted) {\n        any_highlighted = true;\n      }\n    });\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"path\"),\n      )\n      .attr(\"class\", (d) => {\n        if (d.highlighted) {\n          return `link ${styles.link_highlight} highlighted`;\n        }\n        else {\n          if (any_highlighted) {\n            return `link ${styles.linkInvisible}`;\n          }\n          else {\n            return `link ${styles.link}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      });\n\n    return link;\n  }\n\n  spiralSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let graph = this._graph;\n\n    let simulation = d3\n      .forceSimulation(graph.nodes)\n      .alpha(0.05)\n      .alphaTarget(0)\n      .alphaDecay(0.0001)\n      .force(\"spiral\",\n        force_spiral(w, h)\n          .strength(0.3)\n          .index((d) => {\n            return d.sort_index;\n          })\n      )\n      /*.force(\n        \"collide\",\n        d3\n        .forceCollide()\n        .strength(5.0)\n        .radius((d) => d.radius)\n        .iterations(20)\n      )*/\n      // This function with help from https://stackoverflow.com/a/13456081\n      .on(\"tick\", () => {\n\n        this._link.attr(\"d\", (d) => {\n          if (d.target.x === undefined || d.source.x === undefined) {\n            return null;\n          }\n\n          // The smaller the curve factor the greater the curve\n          const curveFactor = 2;\n          const dx = d.target.x - d.source.x;\n          const dy = d.target.y - d.source.x;\n          const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n          return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;\n        });\n\n        this._node\n          .attr(\"cx\", (d) => {\n            return (d.x = constrain(d.x, w, d.r));\n          })\n          .attr(\"cy\", (d) => {\n            return (d.y = constrain(d.y, h, d.r));\n          });\n\n        this._label\n          .attr(\"x\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let width = d.textSize[0];\n            let delta = 0.5 * width;\n\n            if (d.x + delta > window.innerWidth) {\n              return window.innerWidth - width - 20;\n            }\n            else if (d.x - delta < 5) {\n              return 5;\n            }\n            else {\n              return d.x - d.radius - delta;\n            }\n          })\n          .attr(\"y\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let height = d.textSize[1];\n\n            return d.y + (0.55 * (height + d.radius));\n          });\n\n      })\n      .on(\"end\", () => {\n        console.log(\"END\");\n      });\n\n    this._is_running = true;\n\n    // Save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  restartSimulation() {\n    if (this._simulation) {\n      this._simulation.restart();\n      this._is_running = true;\n    }\n  }\n\n  stopSimulation() {\n    this._simulation.stop();\n    this._is_running = false;\n  }\n\n  isRunning() {\n    return this._is_running;\n  }\n\n  updateLinks(indirectConnectionsVisible) {\n    if (this._graph.edges) {\n      this.setState({\n        indirectConnectionsVisible: indirectConnectionsVisible,\n      });\n      this.updateLink(this._graph.edges);\n    }\n  }\n\n  drawFromScratch() {\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .attr(\"class\", styles.svg_view)\n      .on(\"click\", () => {\n        this.clearPopup();\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this.spiralSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this.updateLink(graph.edges);\n    this._node = this.updateNode(graph.nodes);\n    this._label = this.updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      this._label = this.updateNodeText(this._graph.nodes);\n    }\n\n    if (this._graph_changed) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n    }\n  }\n}\n\nForceGraphD3.propTypes = {\n}\n\nexport default ForceGraphD3;","/** Internal function used to return a function that\n *  returns a constant value\n **/\nfunction _constant(x) {\n  return function () {\n    return x;\n  };\n}\n\n/** Internal function used to return a function that counts up from\n *  0 every time it is called\n */\nfunction _return_index() {\n  let i = 0;\n  return function () {\n    let j = i;\n    i += 1;\n    return j;\n  }\n}\n\n/** Force function that pulls nodes towards a spiral design that\n *  is centered in a canvas of specified width and height. You can\n *  specify the strength of this force, and also the index that\n *  maps a node to a point in the spiral. The center point of the\n *  spiral is index 0, with subsequent points counting up uniformly\n *  from there. The spiral is resized automatically to ensure that\n *  all points are contained on the canvas.\n */\nexport default function force_spiral(width, height) {\n  let nodes = null;\n  let index = _return_index();\n  let strength = _constant(0.1);\n  let strengths = null;\n  let indexes = null;\n  let points_x = null;\n  let points_y = null;\n\n  if (height == null) height = 600;\n  if (width == null) width = 600;\n\n  /** Calculate the force on the nodes and update the velocities.\n   *  This uses the spiral points pre-calculated in 'initialise'.\n   *  Each node looks up its spiral point based on the index\n   *  assigned to each node\n   */\n  function force(alpha) {\n    if (!nodes) return;\n\n    for (let i = 0, n = nodes.length; i < n; ++i) {\n      let node = nodes[i];\n      let index = indexes[i];\n      node.vx += (points_x[index] - node.x) * strengths[i] * alpha;\n      node.vy += (points_y[index] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  /** Initialise the spiral. This pre-fectches all of the strengths\n   *  for the nodes and places them into an array.\n   *\n   *  This then pre-fetches all of the node indexes, and, using the\n   *  maximum index, works out and pre-calculates the points of a\n   *  spiral with enough points to satisfy all indexes, and that\n   *  ensures that they all fit onto the screen.\n   *\n   *  These points are placed into the points_x and points_y arrays.\n   */\n  function initialize() {\n    if (!nodes) return;\n\n    let n = nodes.length;\n\n    // collect the strengths and indexes\n    strengths = new Array(n);\n    indexes = new Array(n);\n\n    for (let i = 0; i < n; ++i) {\n      strengths[i] = +strength(nodes[i], i, nodes);\n      indexes[i] = Math.floor(index(nodes[i], i, nodes));\n\n      if (indexes[i] < 0) {\n        indexes[i] = 0;\n      } else if (indexes[i] >= 1024 * 1024) {\n        // limit to 1 MB\n        indexes[i] = 1024 * 1024;\n      }\n    }\n\n    // what is the maximum index - will need to know this to generate\n    // all of the points\n    let max_index = 0;\n\n    if (n > 0) {\n      max_index = Math.max(...indexes);\n    }\n\n    // now calculate all of the points\n    points_x = new Array(max_index + 1);\n    points_y = new Array(max_index + 1);\n\n    let angle = 0.0;\n    let radius = 0.0;\n\n    let min_x = 0.0;\n    let max_x = 0.0;\n    let min_y = 0.0;\n    let max_y = 0.0;\n\n    for (let i = 1; i <= max_index; ++i) {\n      radius = Math.sqrt(i);\n      angle += Math.asin(1 / radius);\n      points_x[i] = Math.cos(angle) * radius;\n      points_y[i] = Math.sin(angle) * radius;\n\n      min_x = Math.min(min_x, points_x[i]);\n      max_x = Math.max(max_x, points_x[i]);\n\n      min_y = Math.min(min_y, points_y[i]);\n      max_y = Math.max(max_y, points_y[i]);\n    }\n\n    for (let i = max_index + 1; i <= 40; ++i) {\n      radius = Math.sqrt(i);\n      angle += Math.asin(1 / radius);\n      let point_x = Math.cos(angle) * radius;\n      let point_y = Math.sin(angle) * radius;\n\n      min_x = Math.min(min_x, point_x);\n      max_x = Math.max(max_x, point_x);\n\n      min_y = Math.min(min_y, point_y);\n      max_y = Math.max(max_y, point_y);\n    }\n\n    // we now need to scale such that 'radius' can fit comfortably\n    // on a width * height page\n    let center_x = width / 2;\n    let center_y = height / 2;\n\n    let scale_x = 0.80 * width / (max_x - min_x);\n    let scale_y = 0.80 * height / (max_y - min_y);\n\n    // offset the center slightly as the spiral biases slightly\n    center_x -= 0.4 * scale_x * (max_x + min_x);\n    center_y -= 0.4 * scale_y * (max_y + min_y);\n\n    points_x[0] = center_x;\n    points_y[0] = center_y;\n\n    for (let i = 1; i <= max_index; ++i) {\n      points_x[i] = center_x + (points_x[i] * scale_x);\n      points_y[i] = center_y + (points_y[i] * scale_y);\n    }\n  }\n\n  /** Add the initialise function to the force object that will be returned */\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the strength for each node\n   */\n  force.strength = function (_) {\n    return arguments.length ? ((strength = typeof _ === \"function\" ?\n      _ : _constant(+_)), initialize(), force) : strength;\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the index on the spiral for each node\n   */\n  force.index = function (_) {\n    return arguments.length ? ((index = typeof _ === \"function\" ?\n      _ : _return_index()), initialize(), force) : index;\n  };\n\n  return force;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"uob_logo_image\":\"ForceGraph_uob_logo_image__3l_1N\",\"qr_logo_image\":\"ForceGraph_qr_logo_image__1Xmdi\",\"bi_logo_image\":\"ForceGraph_bi_logo_image__uV2J8\",\"qr_logo\":\"ForceGraph_qr_logo__2jxxR\",\"right_logo\":\"ForceGraph_right_logo__1Ekzw\",\"left_logo\":\"ForceGraph_left_logo__2DYAk\",\"svg_view\":\"ForceGraph_svg_view__2ME_c\",\"node\":\"ForceGraph_node__27s5W\",\"node_highlighted\":\"ForceGraph_node_highlighted__13qEh\",\"node_bristol\":\"ForceGraph_node_bristol__1355P\",\"node_bristol_highlighted\":\"ForceGraph_node_bristol_highlighted__3pMdJ\",\"node_bath\":\"ForceGraph_node_bath__2JY3b\",\"node_bath_highlighted\":\"ForceGraph_node_bath_highlighted__2aF1x\",\"node_london\":\"ForceGraph_node_london__3R6Na\",\"node_london_highlighted\":\"ForceGraph_node_london_highlighted__1TQyS\",\"node_selected\":\"ForceGraph_node_selected__3JS3X\",\"link\":\"ForceGraph_link__2qaVU\",\"linkWeak\":\"ForceGraph_linkWeak__2lOg3\",\"linkIndirect\":\"ForceGraph_linkIndirect__1hzat\",\"linkInvisible\":\"ForceGraph_linkInvisible__2lF55\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link_highlight\":\"ForceGraph_link_highlight__3uD71\",\"node_text\":\"ForceGraph_node_text__3ovHB\",\"node_text_highlight\":\"ForceGraph_node_text_highlight__2r00s\",\"node_text_select\":\"ForceGraph_node_text_select__1imLO\"};","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\n\nimport styles from \"./ShipSelector.module.css\";\n\nfunction ShipButton(props) {\n  let name = props.ship.getName();\n\n  name = name.replace(\"SS \", \"\");\n\n  let style = styles.ship_button;\n  let func = props.emitSetShip;\n\n  if (props.selected) {\n    style = styles.ship_button_selected;\n    func = props.emitShowShip;\n  }\n\n  return (\n    <button\n      className={style}\n      href=\"#\"\n      onClick={()=>{func(props.ship)}}\n    >\n      {name}\n    </button>);\n}\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const projects = this.props.projects;\n\n    /// There are three ships, get their IDs and put in chronological order\n    const ssGW = projects.getByName(\"SS Great Western\");\n    const ssGB = projects.getByName(\"SS Great Britain\");\n    const ssGE = projects.getByName(\"SS Great Eastern\");\n\n    this.state = {\n      ships: [ssGW, ssGB, ssGE ],\n      current: ssGW,\n    }\n\n    // We want the graph to start with the GW selected\n    this.props.emitSetShip(ssGW);\n  }\n\n  slotSetShip(ship) {\n    this.setState({ current: ship });\n    this.props.emitSetShip(ship);\n  }\n\n  render() {\n\n    let buttons = [];\n\n    this.state.ships.forEach((ship) => {\n      buttons.push(\n        <ShipButton\n          key={ship}\n          ship={ship}\n          emitSetShip={(s) => { this.slotSetShip(s) }}\n          emitShowShip={this.props.emitShowShip}\n          selected={ship === this.state.current}\n        />);\n    });\n\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.content}>\n          <HBox>\n            {buttons}\n          </HBox>\n        </div>\n      </div>\n    );\n  }\n}\n\nShipButton.propTypes = {\n  ship: PropTypes.object.isRequired,\n  selected: PropTypes.bool.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport VBox from \"./VBox\";\n\nimport styles from \"./LabelButton.module.css\";\n\n\nfunction LabelButton(props) {\n\n    let onClick = null;\n\n    if (props.onClick) {\n      onClick = props.onClick;\n    } else {\n      onClick = () => { console.log(\"NULL\");};\n    }\n\n    return (\n        <VBox>\n            <button\n              className={styles.label}\n              onClick={onClick}\n            >\n              Current<br/>{props.label}\n            </button>\n            <button\n              className={styles.button}\n              onClick={onClick}\n            >\n              {props.button}\n            </button>\n        </VBox>\n    );\n}\n\n\nLabelButton.propTypes = {\n    button: PropTypes.any,\n    label: PropTypes.any,\n    onClick: PropTypes.func\n  };\n\nexport default LabelButton;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport styles from \"./HowDoIOverlay.module.css\";\n\nfunction HowDoIOverlay(props) {\n  let social = props.social;\n\n  let markdown = social.getHelpText();\n\n  if (!markdown) {\n    markdown = \"Not available\";\n  }\n\n  let filename = \"images/ships/Great_Britain.jpg\";\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\"\n               src={require(`../${filename}`)} alt=\"A ship\" />\n        <div className={styles.markdown}><ReactMarkdown source={markdown} /></div>\n      </div>\n    </div>\n  );\n}\n\nHowDoIOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n};\n\nexport default HowDoIOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./AboutOverlay.module.css\";\n\nimport aboutText from \"../data/aboutText.json\";\n\nclass AboutOverlay extends React.Component {\n  render() {\n    return (\n      <div className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2.4vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.textContainer}>\n          <div className={styles.header}>About</div>\n          <div className={styles.intro}>{aboutText[\"intro\"]}</div>\n          <div className={styles.introBody}>\n            <p>{aboutText[\"introParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"introParaTwo\"]}</p>\n          </div>\n          <div className={styles.sectionHeader}>{aboutText[\"methodHeader\"]}</div>\n          <div className={styles.body}>\n            <p>{aboutText[\"methodParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"methodParaTwo\"]}</p>\n          </div>\n          <div className={styles.sectionHeader}>{aboutText[\"sourcesHeader\"]}</div>\n          <div className={styles.body}>\n            <p>{aboutText[\"sourcesParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"sourcesParaTwo\"]}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nAboutOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n};\n\nexport default AboutOverlay;\n","\nimport { style } from \"d3-selection\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport HBox from \"./HBox\";\nimport VBox from \"./VBox\";\n\nimport Slider from 'rc-slider';\nimport 'rc-slider/assets/index.css';\n\nimport styles from \"./KeyDatesBox.module.css\";\n\n\nclass KeyDatesBox extends React.Component {\n\n  render() {\n\n    let social = this.props.social;\n\n    let dates = social.getKeyDates().getSortedDates();\n\n    let date = dates[this.props.index];\n\n    let max_val = dates.length;\n\n    return (\n      <div className={styles.box}>\n        <VBox>\n          <div className={styles.sliderbox}>\n            <Slider min={0} max={max_val-1}\n                    value={this.props.index}\n                    onChange={(val)=>{this.props.signalSetDateIndex(val)}}/>\n          </div>\n            <div className={styles.textbox}>\n              {date.getDescription()}\n            </div>\n        </VBox>\n      </div>\n    );\n  }\n}\n\nKeyDatesBox.propTypes = {\n};\n\nexport default KeyDatesBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport VBox from \"./VBox\";\nimport moment from \"moment\";\n\nimport styles from \"./MainMenu.module.css\";\n\nconst saveSvgAsPng = require(\"save-svg-as-png\");\n\n\nfunction MenuLabel(props) {\n  return (\n    <div className={styles.menu_label}\n         onClick={props.onClick}>\n      {props.children}\n    </div>\n  )\n}\n\n\nfunction MenuButton(props) {\n  let onClick = null;\n\n  if (props.onClick) {\n    onClick = props.onClick;\n  } else {\n    onClick = () => null;\n  }\n\n  return (\n    <button className={styles.menu_button} onClick={onClick}>\n      {props.children}\n    </button>\n  );\n}\n\n\nclass MainMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.wrapperRef = React.createRef();\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      this.props.close();\n      event.stopPropagation();\n    }\n  }\n\n  render() {\n    let unconnectedNodesText = this.props.unconnectedNodesVisible ? \"Visible\" : \"Invisible\";\n    let ncEngineersText = this.props.ncEngineersVisible ? \"Visible\" : \"Invisible\";\n\n    return (\n      <div data-testid=\"AnalysisPanel\" ref={this.setWrapperRef} className={styles.panel}>\n        <VBox>\n          <MenuButton\n              onClick={() => {\n                this.props.close();\n              }}\n          >\n             Close \n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}>\n            Current<br/>Spiral Order\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}\n          >\n            {this.props.spiralOrder}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}>\n            Current<br/>Node Size\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}\n          >\n            {this.props.sizeText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            Current<br/>Filter\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            {this.props.filterText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            Current<br/>Unconnected\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            {unconnectedNodesText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            Current<br/>Non-contributers\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            {ncEngineersText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            Current<br/>Search\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            {this.props.searchText}\n          </MenuButton>\n\n          <MenuLabel>\n            Further Options\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitResetFilters();\n            }}\n          >\n            Reset / Reload\n          </MenuButton>\n\n          <MenuButton\n            onClick={() => {\n              const imageOptions = {\n                scale: 1,\n                encoderOptions: 1,\n                backgroundColor: \"#000000\",\n              };\n\n              const filename = \"BrunelsNetwork-\" + moment().format(\"YYYYMMDD-hhmmss\") + \".png\";\n\n              saveSvgAsPng.saveSvgAsPng(document.getElementById(\"svg-viz\"), filename, imageOptions);\n            }}\n          >\n            Save as image\n          </MenuButton>\n        </VBox>\n      </div>\n    );\n  }\n}\n\nMenuButton.propTypes = {\n  children: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n}\n\nMenuLabel.propTypes = {\n  children: PropTypes.object.isRequired,\n}\n\nMainMenu.propTypes = {\n  close: PropTypes.func.isRequired,\n  unconnectedNodesVisible: PropTypes.bool.isRequired,\n  ncEngineersVisible: PropTypes.bool.isRequired,\n  engineersFiltered: PropTypes.bool.isRequired,\n  commercialFiltered: PropTypes.bool.isRequired,\n  searchBios: PropTypes.bool.isRequired,\n  searchHighlight: PropTypes.bool.isRequired,\n  emitResetFilters: PropTypes.func.isRequired,\n  emitToggleFilterCommercial: PropTypes.func.isRequired,\n  emitToggleFilterEngineering: PropTypes.func.isRequired,\n  emitToggleUnconnectedNodesVisible: PropTypes.func.isRequired,\n  emitToggleNCEngineersVisible: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  emitSearchBiosToggled: PropTypes.func.isRequired,\n};\n\nexport default MainMenu;\n","import React, { useState, useEffect } from 'react';\n\nimport styles from \"./PlayPause.module.css\";\n\nclass PlayPause extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {isActive: false,\n                  signalPlay: props.signalPlay,\n                  signalPause: props.signalPause};\n  }\n\n  toggle() {\n    let isActive = !(this.state.isActive);\n\n    if (isActive){\n      if (this.state.signalPlay){\n        this.state.signalPlay();\n      }\n    } else {\n      if (this.state.signalPause){\n        this.state.signalPause();\n      }\n    }\n\n    this.setState({isActive: isActive});\n  }\n\n  render() {\n    return (\n      <div className={styles.box}>\n        <button onClick={() => {this.toggle()}}>\n          {this.state.isActive ? 'Pause' : 'Play'}\n       </button>\n      </div>\n    );\n  }\n};\n\nexport default PlayPause;","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./SearchBar.module.css\";\n\n\nclass SearchBar extends React.Component {\n\n  onChangeHandler(event) {\n    let text = event.target.value;\n\n    if (this.props.emitUpdate) {\n      this.props.emitUpdate(text);\n    }\n  }\n\n  onSubmitHandler(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    let search_text = \"\";\n\n    if (this.props.searchText) {\n      search_text = this.props.searchText;\n    }\n\n    let clear_button = null;\n    let link_button = null;\n\n    if (search_text) {\n      clear_button = (\n        <div className={styles.clearButton}\n             onClick={()=>{this.props.emitUpdate(\"\")}}\n        >\n          &nbsp;X&nbsp;\n        </div>);\n\n      if (this.props.searchHighlightAvailable) {\n        let highlight = this.props.searchHighlightToggled;\n\n        let link_style = styles.linkButton;\n\n        if (highlight) {\n          link_style = styles.linkButtonHighlighted;\n        }\n\n        link_button = (\n          <div className={link_style}\n            onClick={() => { this.props.emitSearchHighlightToggled(!highlight) }}\n          >\n            &nbsp;&nbsp;\n          </div>);\n      }\n    }\n\n    return (\n      <form className={styles.form}\n        onSubmit={(e) => this.onSubmitHandler(e)} >\n        <HBox>\n          <BigBox>\n            <input key=\"input\" className={styles.input} type=\"search\"\n              onChange={(e) => this.onChangeHandler(e)}\n              value={search_text}\n              placeholder=\"Search...\" />\n          </BigBox>\n          {link_button}\n          {clear_button}\n        </HBox>\n      </form>);\n  }\n}\n\nSearchBar.propTypes = {\n  searchHighlightToggled: PropTypes.bool.isRequired,\n  emitUpdate: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  searchText: PropTypes.string,\n  searchHighlightAvailable: PropTypes.bool,\n};\n\n\n\nexport default SearchBar;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport styles from \"./ShipOverlay.module.css\";\n\nfunction ShipOverlay(props) {\n  let social = props.social;\n\n  const ship = social.get(props.ship);\n\n  let markdown = social.getProjectText(ship);\n\n  if (!markdown) {\n    markdown = \"Not available\";\n  }\n\n  let filename = social.getImage(ship);\n\n  if (!filename) {\n    filename = \"images/Great_Western_maiden_voyage.jpg\";\n  }\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\"\n               src={require(`../${filename}`)} alt=\"A ship\" />\n        <div className={styles.markdown}><ReactMarkdown source={markdown} /></div>\n      </div>\n    </div>\n  );\n}\n\nShipOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  ship: PropTypes.string.isRequired,\n};\n\nexport default ShipOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nclass SlidingPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      position: \"right\",\n      defaultSize: \"40%\",\n      minSize: \"300px\",\n      maxSize: null,\n    };\n  }\n\n  render() {\n    let container = styles.rightContainer;\n    let transition = SlideFromRight;\n\n    let width = this.props.width;\n    let height = this.props.height;\n\n    if (height && !width) {\n      width = \"100%\";\n    }\n\n    if (width && !height) {\n      height = \"100%\";\n    }\n\n    let horiz_size = { width: width };\n    let vert_size = { height: height };\n\n    let style = { width: width, height: height, minSize: this.state.minSize };\n\n    if (this.props.maxSize) {\n      horiz_size.maxWidth = this.props.maxSize;\n      vert_size.maxHeight = this.props.maxSize;\n    }\n\n    // let style = horiz_size;\n    // Get the passed in position\n    let position = this.props.position;\n    if (!position) {\n      position = this.state.position;\n    }\n\n    if (position === \"right\") {\n      container = styles.rightContainer;\n      transition = SlideFromRight;\n    } else if (position === \"rightBottom\") {\n      container = styles.rightContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"bottom\") {\n      container = styles.bottomContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"top\") {\n      container = styles.topContainer;\n      transition = SlideFromTop;\n    } else if (position === \"left\") {\n      container = styles.leftContainer;\n      transition = SlideFromLeft;\n    }\n\n    container = `${container} ${styles.container}`;\n\n    return (\n      <CSSTransition in={this.props.isOpen} timeout={200} classNames={transition} unmountOnExit>\n        <div className={container} style={style}>\n          {this.props.children}\n        </div>\n      </CSSTransition>\n    );\n  }\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./WarningOverlay.module.css\";\n\nfunction WarningOverlay(props) {\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.content}>\n        {props.children}\n      </div>\n    </div>\n  );\n}\n\nWarningOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n  children: PropTypes.any.isRequired,\n};\n\nexport default WarningOverlay;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getByID(id) {\n    if (!id) return null;\n\n    return this.state.bios[id];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport get_id from \"./get_id\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n      is_highlighted: false,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    //console.log(this.state.affiliations);\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    //console.log(this.state.correspondances);\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    // Filter this connection by project ID\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nProjects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nProjects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      // note that correspondences is a typo from the python!\n      this.state.correspondances = setState(state.correspondences, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        return \"orange\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    // let weight = this.getWeightFromType();\n    let weight = this.getWeight();\n\n    let edge = {\n      id: this.getID(),\n      source: get_id(this.state.n0),\n      target: get_id(this.state.n1),\n      value: weight,\n      type: this.state.type,\n      color: color,\n      highlighted: this.getHighlighted(),\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport get_id from \"./get_id\";\n\nimport {\n  KeyError,\n  MissingError\n} from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._connections = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[get_id(existing)] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = get_id(connection);\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    let connection_id = get_id(connection);\n    this._names[connection.getName()] = connection_id;\n    this.state.registry[connection_id] = connection;\n\n    let id0 = connection.getNode0ID();\n    let id1 = connection.getNode1ID();\n\n    if (!(id0 in this._connections)) {\n      this._connections[id0] = {};\n    }\n\n    if (!(id1 in this._connections)) {\n      this._connections[id1] = {};\n    }\n\n    this._connections[id0][id1] = 1;\n    this._connections[id1][id0] = 1;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(get_id(name));\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new TypeError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  gotConnections(id) {\n    return this.nConnections(id) > 0;\n  }\n\n  nConnections(id) {\n    let c = this._connections[id];\n\n    if (!c) {\n      return 0;\n    }\n    else {\n      return Object.keys(c).length;\n    }\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n    let conns = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n\n          let id0 = connection.getNode0ID();\n          let id1 = connection.getNode1ID();\n\n          if (!(id0 in conns)) {\n            conns[id0] = {};\n          }\n\n          if (!(id1 in conns)) {\n            conns[id1] = {};\n          }\n\n          conns[id0][id1] = 1;\n          conns[id1][id0] = 1;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._connections = conns;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  highlightConnections(item, social) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode1ID(), false).setHighlighted(true);\n      } else if (connection.getNode1ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode0ID(), false).setHighlighted(true);\n      }\n    }\n  }\n\n  getConnectionsInvolving(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let connections = [];\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        connections.push(connection);\n      } else if (connection.getNode1ID() in item) {\n        connections.push(connection);\n      }\n    }\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  areConnected(item0, item1) {\n    item0 = get_id(item0);\n    item1 = get_id(item1);\n\n    if (item0 in this._connections) {\n      return item1 in this._connections[item0];\n    } else {\n      return false;\n    }\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n\n    let id0 = v.getNode0ID();\n    let id1 = v.getNode1ID();\n\n    if (!(id0 in connections._connections)) {\n      connections._connections[id0] = {};\n    }\n\n    if (!(id1 in connections._connections)) {\n      connections._connections[id1] = {};\n    }\n\n    connections._connections[id0][id1] = 1;\n    connections._connections[id1][id0] = 1;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport KeyDate from \"./KeyDate\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_keydate_uid() {\n  let uid = uuidv4();\n  return \"K\" + uid.substring(uid.length - 7);\n}\n\nclass KeyDates {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAKeyDatesObject = true;\n    this._sorted_dates = null;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new KeyDates();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  keyDates() {\n    return this._names;\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  getByIndex(date_index){\n    let sorted_dates = this.getSortedDates();\n\n    if (date_index < 0){\n      return date_index = 0;\n    } else if (date_index >= sorted_dates.length) {\n      return sorted_dates.length - 1;\n    }\n\n    return sorted_dates[date_index];\n  }\n\n  getSortedDates(){\n    if (this._sorted_dates){\n      return this._sorted_dates;\n    }\n\n    let d = this.getNames();\n    d.sort((a, b) => {return a - b});\n\n    let dates = [];\n\n    d.forEach((value) => {\n      dates.push(this.getByName(value));\n    });\n\n    this._sorted_dates = dates;\n\n    return this._sorted_dates;\n  }\n\n  canAdd(item) {\n    return item instanceof KeyDate || item._isAKeyDateObject;\n  }\n\n  getNumDates(){\n    return Object.keys(this._names).length;\n  }\n\n  wrapIndex(date_index) {\n    date_index = parseInt(date_index);\n\n    let num_dates = this.getNumDates();\n\n    if (num_dates <= 0){\n      num_dates = 1;\n    }\n\n    if (date_index === NaN){\n      return 0;\n    } else if (date_index < 0){\n      return num_dates - 1;\n    } else if (date_index >= num_dates){\n      return 0;\n    } else {\n      return date_index;\n    }\n  }\n\n  add(keydate) {\n    if (!this.canAdd(keydate)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(keydate.getName());\n    } catch (error) {\n      console.error(\"Cannot get key date\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(keydate);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    keydate = KeyDate.clone(keydate);\n\n    let id = keydate.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate KeyDate ID ${keydate}`);\n      }\n\n      keydate._updateHooks(this._getHook);\n      this.state.registry[id] = keydate;\n    } else {\n      let uid = _generate_keydate_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_keydate_uid();\n      }\n\n      keydate.state.id = uid;\n    }\n\n    keydate._updateHooks(this._getHook);\n    this._names[keydate.getName()] = keydate.getID();\n    this.state.registry[keydate.getID()] = keydate;\n\n    return keydate;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No key date with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof KeyDate || name._isAKeyDateObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No key date matches '${name}. Available key dates are '${keys}'`);\n  }\n\n  get(id) {\n    let keydate = this.state.registry[id];\n\n    if (!keydate) {\n      throw new MissingError(`No KeyDate with ID ${id}`);\n    }\n\n    return keydate;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nKeyDates.unDry = function (value) {\n  let keydates = new KeyDates();\n  keydates.state = value;\n  keydates._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    keydates._names[v.getName()] = key;\n  });\n\n  return keydates;\n};\n\nDry.registerClass(\"KeyDates\", KeyDates);\n\nexport default KeyDates;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nfunction _rand_int(n){\n  return Math.floor(Math.random() * n);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filterNonContributingEngineers() {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (!person.isNonContributingEngineer()){\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let person = this.state.registry[key];\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor && anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  selectAtRandom(bios){\n    // return a randomly selected person who has just been added and who \n    // has a biography\n    let keys = Object.keys(this.state.registry);\n    let npeople = keys.length;\n    if (npeople === 0){\n      return null;\n    }\n    \n    let idx = _rand_int(npeople);\n    let id = keys[idx];\n\n    let person = this.get(id);\n\n    let bio = bios.get(person);\n\n    while (!bio){\n      keys.splice(idx, 1);\n\n      npeople = keys.length;\n      if (npeople === 0){\n        return null;\n      }\n\n      idx = _rand_int(npeople);\n      id = keys[idx];\n      person = this.get(id);\n      bio = bios.get(person);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\nimport WeightPath from \"./WeightPath\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      highlighted: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n      weight: {},\n      weight_path: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group, match_and=true) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    if (match_and) {\n      return Object.keys(seen).length === Object.keys(group).length;\n    }\n    else {\n      return Object.keys(seen).length > 0;\n    }\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterKeyDate(keydate){\n    const weightpath = this.getWeightPath();\n\n    let weight = weightpath.getWeightAtDate(keydate);\n\n    if (weight <= 0.0){\n      return null;\n    }\n    \n    this.state.weight = weight;\n\n    return this;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let sources = _filterProject(this.state.sources, project);\n    let weight = _filterProject(this.state.weight, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n      weight !== this.state.weight || sources !== this.state.sources) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person.state.sources = sources;\n      person.state.weight = weight;\n      person.state.projects = new_projects;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n      this.state.weight_path = setState(state.weight_path, {});\n      this.state.is_highlighted = false;\n      this.state.is_selected = false;\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.firstnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    this.state.surnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    // Returns the positions object for each project\n    return this.state.positions;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getProjectWeight(projectKey) {\n    const weight = this.state.weight[projectKey];\n\n    if (!weight) {\n      console.error(\"No weight for \" + this.getName() + this.getID() + \" for project with key \" + projectKey);\n      return 1;\n    }\n\n    return weight;\n  }\n\n  getWeightPath(project_id = null) {\n    if (project_id === null) {\n      // use the first project's weight\n      project_id = Object.keys(this.state.weight_path)[0];\n    }\n\n    const weight_path = this.state.weight_path[project_id];\n\n    if (!weight_path){\n      return new WeightPath();\n    }\n\n    return weight_path;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n  \n  getWeight(project_id = null) {\n    let weight = this.state.weight;\n\n    if (weight === null){\n      weight = 5.0;\n    }\n\n    return weight;\n  }\n\n  isEngineer(project_id = null) {\n    return true;\n /*   if (project_id === null) {\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical().toLowerCase()\n                           .replace(/\\s/g, \"\")\n                           .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n      if (positionGroups[\"engineering\"][\"members\"].includes(name)) {\n        return true;\n      }\n    }\n\n    return false;*/\n  }\n\n  isNonContributingEngineer(project_id = null) {\n    return false;\n    /*if (project_id === null) {\n      // return this status with the first project\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical();\n      if (name.includes(\"non-cont\")) {\n        return true;\n      }\n    }\n\n    return false;*/\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"circle\",\n      weight: this.getWeight(),\n      type: \"person\",\n      location: this.getWeightPath().getLocation(),\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      project: this.getProjectID(),\n      is_nc_engineer: this.isNonContributingEngineer(),\n      is_engineer: this.isEngineer(),\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport lodash, { isString } from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport KeyDates from \"./KeyDates\";\nimport DateRange from \"./DateRange\";\nimport get_id from \"./get_id\";\n\nimport score_by_influence from \"./ScoringFunctions\";\nimport size_by_weight from \"./SizingFunctions\";\n\nimport {\n  ValueError\n} from \"./Errors\";\n\nfunction _push(values, list) {\n  if (!list || !values) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this.state.scoring_function = score_by_influence;\n    this.state.sizing_function = size_by_weight;\n    this.state.filter_unconnected = true;\n    this.state.filter_nc_engineers = true;\n    this.state.images = {};\n    this.state.default_image = null;\n    this.state.project_text = {};\n    this.state.help_text = null;\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = {\n      ...this.state\n    };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    if (!(this.state.keydates instanceof KeyDates)) {\n      state.keydates = new KeyDates();\n    } else {\n      state.keydates = this.state.keydates;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        // console.error(\"For key : \", key, \"\\nError: \", error);\n      }\n    }\n  }\n\n  setImage(id, filename, credit) {\n    id = get_id(id);\n    this.state.images[id] = [filename, credit];\n  }\n\n  setDefaultImage(filename) {\n    this.state.default_image = filename;\n  }\n\n  setKeyDateFilter(date_index){\n    this.state.filter[\"date_index\"] = date_index;\n    this.clearCache();\n  }\n\n  getKeyDates(){\n    return this.state.keydates;\n  }\n\n  getImage(id) {\n    id = get_id(id);\n    let image = this.state.images[id];\n\n    if (image) {\n      return image[0];\n    } else {\n      return this.state.default_image;\n    }\n  }\n\n  getImageCredit(id) {\n    id = get_id(id);\n    let credit = this.state.images[id];\n\n    if (credit) {\n      return credit[1];\n    } else {\n      return null;\n    }\n  }\n\n  setHelpText(text) {\n    this.state.help_text = text;\n  }\n\n  getHelpText() {\n    return this.state.help_text;\n  }\n\n  setProjectText(id, text) {\n    id = get_id(id);\n    this.state.project_text[id] = text;\n  }\n\n  getProjectText(id) {\n    id = get_id(id);\n    return this.state.project_text[id];\n  }\n\n  filterNonContributingEngineers(filter = true) {\n    if (this.state.filter_nc_engineers === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_nc_engineers = true;\n    }\n    else {\n      this.state.filter_nc_engineers = false;\n    }\n\n    this.clearCache();\n  }\n\n  filterUnconnectedNodes(filter = true) {\n    if (this.state.filter_unconnected === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_unconnected = true;\n    }\n    else {\n      this.state.filter_unconnected = false;\n    }\n\n    this.clearCache();\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    /*let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }*/\n\n    /*const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }*/\n\n    /*const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }*/\n\n    const date_index = this.state.filter.date_index;\n\n    if (date_index !== null){\n      const keydate = this.getKeyDates().getByIndex(date_index);\n\n      this.state.cache.node_filters.push((item) => {\n        return item.filterKeyDate(keydate);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {\n        ...node_filter\n      };\n\n      // this filter is returning matching people and the nodes\n      // that are connected to these people\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[get_id(node)] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (get_id(item) in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          // use an \"OR\" match at the moment as this is more\n          // appropriate for the current use of the gui\n          if (item.inGroup(group_filter, false)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  selectAtRandom(){\n    // find someone who has only just been filtered in and who has a biography, and select them\n    let people = this.getPeople(true);\n    return people.selectAtRandom(this.getBiographies());\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        // console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      /*if (this.state.filter_nc_engineers) {\n        this.state.cache.people =\n          this.state.cache.people.filterNonContributingEngineers();\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.people =\n          this.state.cache.people.filterUnconnected(this.getConnections(true));\n      }*/\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        // console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      /*if (this.state.filter_nc_engineers) {\n        this.state.cache.businesses =\n          this.state.cache.businesses.filterNonContributingEngineers();\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.businesses =\n          this.state.cache.businesses.filterUnconnected(this.getConnections(true));\n      }*/\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        // console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {\n      ...this.state.filter\n    };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    item = get_id(item);\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    item = get_id(item);\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  clearHighlights() {\n    this.getPeople(false).clearHighlights();\n    this.getBusinesses(false).clearHighlights();\n    this.getConnections(false).clearHighlights();\n    this.clearCache();\n  }\n\n  clearSelections() {\n    this.getPeople(false).clearSelections();\n    this.getBusinesses(false).clearSelections();\n    this.clearCache();\n  }\n\n  selectSearchMatching(text, include_bios = false, highlight_links = false) {\n    this.clearSelections();\n    this.clearHighlights();\n\n    try {\n      if (text.length === 0) {\n        this.clearCache();\n        return;\n      }\n    }\n    catch (error) {\n      this.clearCache();\n      return;\n    }\n\n    let result = [];\n\n    try {\n      let items = this.getPeople(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    try {\n      let items = this.getBusinesses(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    if (include_bios) {\n      try {\n        let items = this.getBiographies().search(text);\n        _push(items, result);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    let connections = null;\n\n    if (highlight_links) connections = this.getConnections(true);\n\n    result.forEach((item) => {\n      item = get_id(item);\n      item = this.get(item, false);\n\n      try {\n        if (highlight_links) {\n          item.setSelected(true);\n          connections.highlightConnections(item, this);\n        }\n        else {\n          item.setHighlighted(true);\n        }\n\n      } catch (error) {\n        console.log(error);\n      }\n    })\n\n    this.clearCache();\n  }\n\n  setSelected(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      if (highlight_connections) {\n        this.clearHighlights();\n      }\n\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setSelected(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  setHighlighted(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      this.clearHighlights();\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setHighlighted(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  isSelected(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getSelected) {\n      return item.getSelected();\n    }\n    else {\n      return false;\n    }\n  }\n\n  isHighlighted(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getHighlighted) {\n      return item.getHighlighted();\n    }\n    else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetAllFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  resetFiltersNotShip() {\n    const projectFilter = this.state.filter[\"project\"];\n    this.state.filter = {};\n    this.state.filter[\"project\"] = projectFilter;\n    this.clearCache();\n  }\n\n  isAnchor(node) {\n    let id = get_id(node);\n\n    return id === get_id(this.state.anchor);\n  }\n\n  setAnchor(anchor) {\n    if (anchor === null) {\n      if (this.state.anchor === null) {\n        return false;\n      } else {\n        this.state.anchor = null;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    let got_anchor = null;\n\n    if (isString(anchor)) {\n      got_anchor = this.get(anchor);\n    }\n\n    if (got_anchor) {\n      if (got_anchor === this.state.anchor) {\n        return false;\n      }\n      else {\n        this.state.anchor = got_anchor;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    if (anchor) {\n      got_anchor = this.getPeople().find(anchor);\n    }\n\n    if (!got_anchor) {\n      got_anchor = this.getBusinesses().find(anchor);\n    }\n\n    if (!got_anchor) {\n      console.log(`CANNOT FIND ANCHOR ${anchor}: ${got_anchor}`);\n      return false;\n    }\n\n    anchor = got_anchor;\n\n    if (anchor === this.state.anchor) {\n      return false;\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n    return true;\n  }\n\n  toggleFilter(items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    for (let item of items) {\n      item = get_id(item);\n\n      let type = this._getType(item);\n\n      if (!(type in this.state.filter)) {\n        this.state.filter[type] = {};\n      }\n\n      if (item in this.state.filter[type]) {\n        delete this.state.filter[type][item];\n\n        if (Object.keys(this.state.filter[type]).length === 0) {\n          delete this.state.filter[type];\n        }\n      } else {\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  setFilter(category, items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    let filter = {};\n\n    for (let item of items) {\n      let id = get_id(item);\n      filter[id] = 1;\n    }\n\n    this.state.filter[category] = filter;\n    this.clearCache();\n  }\n\n  setFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (!(type in this.state.filter)) {\n          this.state.filter[type] = {};\n        }\n\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  clearFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (item in this.state.filter[type]) {\n          delete this.state.filter[type][item];\n\n          if (Object.keys(this.state.filter[type]).length === 0) {\n            delete this.state.filter[type];\n          }\n        }\n      }\n    }\n\n    this.clearCache();\n  }\n\n  toggleNodeFilter(nodes) {\n    this.toggleFilter(nodes);\n  }\n\n  clearProjectFilter() {\n    this.state.filter[\"project\"] = {};\n  }\n\n  toggleProjectFilter(project) {\n    if (!(\"project\" in this.state.filter)) {\n      this.state.filter[\"project\"] = {};\n    }\n\n    if (project in this.state.filter[\"project\"]) {\n      delete this.state.filter[\"project\"][project];\n    } else {\n      this.state.filter[\"project\"][project] = 1;\n    }\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  /** Set the scoring function used to order the nodes */\n  setScoringFunction(func) {\n    if (func !== this.state.scoring_function) {\n      this.state.scoring_function = func;\n      this.clearCache();\n    }\n  }\n\n  /** Return the scoring function that should be used to order the\n   *  nodes in any ordered graph\n   */\n  getScoringFunction() {\n    return this.state.scoring_function;\n  }\n\n  /** Set the sizing function used to size the nodes */\n  setSizingFunction(func) {\n    if (func !== this.state.sizing_function) {\n      this.state.sizing_function = func;\n      this.clearCache();\n    }\n  }\n\n/** Return the sizing function that should be used to size the nodes */\n  getSizingFunction() {\n    return this.state.sizing_function;\n  }\n\n  /** Return the graph of nodes and edges that will be displayed by\n   *  the app. This should apply all of the filters and only return\n   *  the nodes and edges that should be visible. It should also\n   *  apply the indexing function so that the index of the nodes\n   *  show their sorted order according to the primary criterion\n   */\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    let nodes = this.getPeople().getNodes();\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    // create a dictionary so we know which nodes are selected\n    let n = {};\n    for (let i in nodes) {\n      n[get_id(nodes[i])] = 1;\n    }\n\n    // get only the edges that involve these nodes\n    let edges = this.getConnections().getEdges(n);\n\n    // let each node know how many connections it has got\n    let counts = {};\n\n    let add_count = (id) => {\n      // ensures x == 1 if id doesn't exist in counts\n      let x = (counts[id] || 0) + 1;\n      counts[id] = x;\n    };\n\n    for (let i in edges) {\n      add_count(edges[i].source);\n      add_count(edges[i].target);\n    }\n\n    nodes.forEach((node) => {\n      let count = counts[node.id];\n\n      if (!count) { count = 0; }\n      node.edge_count = count;\n    });\n\n    let scoring_function = this.getScoringFunction();\n\n    if (!scoring_function) {\n      scoring_function = score_by_influence;\n    }\n\n    scoring_function(nodes, edges, this);\n\n    let sizing_function = this.getSizingFunction();\n\n    if (!sizing_function) {\n      sizing_function = size_by_weight;\n    }\n\n    sizing_function(nodes, edges, this);\n\n    this.state.cache.graph = {\n      nodes: nodes,\n      edges: edges\n    };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    id = get_id(id);\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"TextButton_button__2yNkD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigbox\":\"BigBox_bigbox__2UnYn\",\"fill\":\"BigBox_fill__2HrJ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"vbox\":\"VBox_vbox__2jGLW\",\"child\":\"VBox_child__2_lfW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hbox\":\"HBox_hbox__3BAn8\",\"child\":\"HBox_child__2YyC5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"closeButton\":\"Popover_closeButton__1Msfq\",\"popOver\":\"Popover_popOver__10jzZ\",\"header\":\"Popover_header__2TOZN\",\"bio\":\"Popover_bio__3Ekto\"};","module.exports = __webpack_public_path__ + \"static/media/uob_logo.69d10a8d.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/bi_logo.60f3dcf3.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ShipSelector_container__3AFhA\",\"content\":\"ShipSelector_content__1xElP\",\"arrow_button\":\"ShipSelector_arrow_button__3fE9s\",\"ship_button\":\"ShipSelector_ship_button__3S73O\",\"ship_button_selected\":\"ShipSelector_ship_button_selected__1Fyze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"LabelButton_label__2iyuT\",\"button\":\"LabelButton_button__1F1S6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HowDoIOverlay_container__NXP8l\",\"closeButton\":\"HowDoIOverlay_closeButton__1XerT\",\"image\":\"HowDoIOverlay_image__8RfeS\",\"content\":\"HowDoIOverlay_content__3poua\",\"name\":\"HowDoIOverlay_name__1LCvv\",\"bio\":\"HowDoIOverlay_bio__kFH79\",\"markdown\":\"HowDoIOverlay_markdown__3nSuH\"};","var map = {\n\t\"./\": 5,\n\t\"./SocialApp\": 33,\n\t\"./SocialApp.js\": 33,\n\t\"./SocialApp.module.css\": 264,\n\t\"./components/AboutOverlay\": 172,\n\t\"./components/AboutOverlay.js\": 172,\n\t\"./components/AboutOverlay.module.css\": 265,\n\t\"./components/AboutOverlay.test\": 266,\n\t\"./components/AboutOverlay.test.js\": 266,\n\t\"./components/BigBox\": 64,\n\t\"./components/BigBox.js\": 64,\n\t\"./components/BigBox.module.css\": 232,\n\t\"./components/BioOverlay\": 134,\n\t\"./components/BioOverlay.js\": 134,\n\t\"./components/BioOverlay.module.css\": 338,\n\t\"./components/ForceGraph\": 154,\n\t\"./components/ForceGraph.js\": 154,\n\t\"./components/ForceGraph.module.css\": 162,\n\t\"./components/HBox\": 71,\n\t\"./components/HBox.js\": 71,\n\t\"./components/HBox.module.css\": 234,\n\t\"./components/HowDoIOverlay\": 165,\n\t\"./components/HowDoIOverlay.js\": 165,\n\t\"./components/HowDoIOverlay.module.css\": 262,\n\t\"./components/KeyDatesBox\": 206,\n\t\"./components/KeyDatesBox.js\": 206,\n\t\"./components/KeyDatesBox.module.css\": 339,\n\t\"./components/LabelButton\": 164,\n\t\"./components/LabelButton.js\": 164,\n\t\"./components/LabelButton.module.css\": 247,\n\t\"./components/MainMenu\": 207,\n\t\"./components/MainMenu.js\": 207,\n\t\"./components/MainMenu.module.css\": 341,\n\t\"./components/Overlay\": 135,\n\t\"./components/Overlay.js\": 135,\n\t\"./components/Overlay.module.css\": 342,\n\t\"./components/OverlayWrapper\": 343,\n\t\"./components/OverlayWrapper.js\": 343,\n\t\"./components/PlayPause\": 208,\n\t\"./components/PlayPause.js\": 208,\n\t\"./components/PlayPause.module.css\": 344,\n\t\"./components/Popover\": 155,\n\t\"./components/Popover.js\": 155,\n\t\"./components/Popover.module.css\": 235,\n\t\"./components/SearchBar\": 209,\n\t\"./components/SearchBar.js\": 209,\n\t\"./components/SearchBar.module.css\": 345,\n\t\"./components/ShipOverlay\": 210,\n\t\"./components/ShipOverlay.js\": 210,\n\t\"./components/ShipOverlay.module.css\": 346,\n\t\"./components/ShipSelector\": 163,\n\t\"./components/ShipSelector.js\": 163,\n\t\"./components/ShipSelector.module.css\": 246,\n\t\"./components/SlidingPanel\": 211,\n\t\"./components/SlidingPanel.js\": 211,\n\t\"./components/SlidingPanel.module.css\": 347,\n\t\"./components/TextButton\": 89,\n\t\"./components/TextButton.js\": 89,\n\t\"./components/TextButton.module.css\": 231,\n\t\"./components/TextButton.test\": 352,\n\t\"./components/TextButton.test.js\": 352,\n\t\"./components/ToggleButton\": 353,\n\t\"./components/ToggleButton.js\": 353,\n\t\"./components/ToggleButton.module.css\": 354,\n\t\"./components/VBox\": 70,\n\t\"./components/VBox.js\": 70,\n\t\"./components/VBox.module.css\": 233,\n\t\"./components/WarningOverlay\": 212,\n\t\"./components/WarningOverlay.js\": 212,\n\t\"./components/WarningOverlay.module.css\": 355,\n\t\"./components/__snapshots__/Overlay.test.js.snap\": 862,\n\t\"./components/__snapshots__/ShipSelector.test.js.snap\": 863,\n\t\"./components/d3/ForceGraph.d3\": 156,\n\t\"./components/d3/ForceGraph.d3.js\": 156,\n\t\"./components/d3/force_spiral\": 160,\n\t\"./components/d3/force_spiral.js\": 160,\n\t\"./components/transitions/SlideFromBottom.module.css\": 350,\n\t\"./components/transitions/SlideFromLeft.module.css\": 348,\n\t\"./components/transitions/SlideFromRight.module.css\": 349,\n\t\"./components/transitions/SlideFromTop.module.css\": 351,\n\t\"./data\": 356,\n\t\"./data.json\": 356,\n\t\"./data/aboutText\": 173,\n\t\"./data/aboutText.json\": 173,\n\t\"./data/dataWeights\": 357,\n\t\"./data/dataWeights.json\": 357,\n\t\"./data/entityImageFilenames\": 358,\n\t\"./data/entityImageFilenames.json\": 358,\n\t\"./data/fixedNodes\": 359,\n\t\"./data/fixedNodes.json\": 359,\n\t\"./data/howDoIOverlayText\": 360,\n\t\"./data/howDoIOverlayText.json\": 360,\n\t\"./data/positionGroups\": 213,\n\t\"./data/positionGroups.json\": 213,\n\t\"./data/sourceImageFilenames\": 361,\n\t\"./data/sourceImageFilenames.json\": 361,\n\t\"./gb_text.md\": 362,\n\t\"./ge_text.md\": 363,\n\t\"./gw_text.md\": 364,\n\t\"./help_text.md\": 365,\n\t\"./images\": 214,\n\t\"./images.json\": 214,\n\t\"./images/bg-128-168.jpg\": 864,\n\t\"./images/bi_logo.png\": 245,\n\t\"./images/engine_shed.jpg\": 865,\n\t\"./images/network.png\": 244,\n\t\"./images/people/Brunel.jpg\": 866,\n\t\"./images/people/Bryan_Donkin.jpg\": 867,\n\t\"./images/people/Christopher_Claxton.jpg\": 868,\n\t\"./images/people/Edward_Chappel.jpg\": 869,\n\t\"./images/people/John_Grantham.jpg\": 870,\n\t\"./images/people/John_Scott.jpg\": 871,\n\t\"./images/people/Robert_Bright.jpg\": 872,\n\t\"./images/people/Samuel_Hall.jpg\": 873,\n\t\"./images/people/Thomas_Guppy.jpg\": 874,\n\t\"./images/people/William_Fairbairn.jpg\": 875,\n\t\"./images/people/William_Patterson.jpg\": 876,\n\t\"./images/people/William_Symonds.jpg\": 877,\n\t\"./images/ships/Great_Britain.jpg\": 878,\n\t\"./images/ships/Great_Eastern.jpg\": 879,\n\t\"./images/ships/Great_Western.jpg\": 880,\n\t\"./images/ssgb_logo.png\": 881,\n\t\"./images/uob_logo.png\": 243,\n\t\"./index\": 5,\n\t\"./index.css\": 9,\n\t\"./index.js\": 5,\n\t\"./model/Affiliation\": 136,\n\t\"./model/Affiliation.js\": 136,\n\t\"./model/Affiliations\": 137,\n\t\"./model/Affiliations.js\": 137,\n\t\"./model/Affiliations.test\": 366,\n\t\"./model/Affiliations.test.js\": 366,\n\t\"./model/Biographies\": 215,\n\t\"./model/Biographies.js\": 215,\n\t\"./model/Business\": 138,\n\t\"./model/Business.js\": 138,\n\t\"./model/Businesses\": 141,\n\t\"./model/Businesses.js\": 141,\n\t\"./model/Businesses.test\": 367,\n\t\"./model/Businesses.test.js\": 367,\n\t\"./model/Connection\": 216,\n\t\"./model/Connection.js\": 216,\n\t\"./model/Connections\": 217,\n\t\"./model/Connections.js\": 217,\n\t\"./model/DateRange\": 60,\n\t\"./model/DateRange.js\": 60,\n\t\"./model/DateRange.test\": 368,\n\t\"./model/DateRange.test.js\": 368,\n\t\"./model/Errors\": 39,\n\t\"./model/Errors.js\": 39,\n\t\"./model/KeyDate\": 140,\n\t\"./model/KeyDate.js\": 140,\n\t\"./model/KeyDates\": 218,\n\t\"./model/KeyDates.js\": 218,\n\t\"./model/Note\": 219,\n\t\"./model/Note.js\": 219,\n\t\"./model/Notes\": 220,\n\t\"./model/Notes.js\": 220,\n\t\"./model/People\": 221,\n\t\"./model/People.js\": 221,\n\t\"./model/Person\": 222,\n\t\"./model/Person.js\": 222,\n\t\"./model/Position\": 142,\n\t\"./model/Position.js\": 142,\n\t\"./model/Positions\": 143,\n\t\"./model/Positions.js\": 143,\n\t\"./model/Positions.test\": 369,\n\t\"./model/Positions.test.js\": 369,\n\t\"./model/Project\": 144,\n\t\"./model/Project.js\": 144,\n\t\"./model/Projects\": 145,\n\t\"./model/Projects.js\": 145,\n\t\"./model/Projects.test\": 370,\n\t\"./model/Projects.test.js\": 370,\n\t\"./model/RoughDate\": 87,\n\t\"./model/RoughDate.js\": 87,\n\t\"./model/RoughDate.test\": 371,\n\t\"./model/RoughDate.test.js\": 371,\n\t\"./model/ScoringFunctions\": 146,\n\t\"./model/ScoringFunctions.js\": 146,\n\t\"./model/SizingFunctions\": 147,\n\t\"./model/SizingFunctions.js\": 147,\n\t\"./model/Social\": 223,\n\t\"./model/Social.js\": 223,\n\t\"./model/Source\": 149,\n\t\"./model/Source.js\": 149,\n\t\"./model/Source.test\": 372,\n\t\"./model/Source.test.js\": 372,\n\t\"./model/Sources\": 148,\n\t\"./model/Sources.js\": 148,\n\t\"./model/WeightPath\": 139,\n\t\"./model/WeightPath.js\": 139,\n\t\"./model/get_id\": 88,\n\t\"./model/get_id.js\": 88,\n\t\"./reset.css\": 8,\n\t\"./socialNetwork\": 224,\n\t\"./socialNetwork.json\": 224\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 263;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"ui_main\":\"SocialApp_ui_main__1aYwH\",\"drawerButton\":\"SocialApp_drawerButton__1yuvm\",\"timer\":\"SocialApp_timer__-Vthu\",\"fullscreen\":\"SocialApp_fullscreen__2xzWo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AboutOverlay_container__fzMAB\",\"closeButton\":\"AboutOverlay_closeButton__2M8EC\",\"textContainer\":\"AboutOverlay_textContainer__2A-mP\",\"header\":\"AboutOverlay_header__3hHMT\",\"intro\":\"AboutOverlay_intro__2XyY_\",\"introBody\":\"AboutOverlay_introBody__2-zQS\",\"sectionHeader\":\"AboutOverlay_sectionHeader__3I8nD\",\"body\":\"AboutOverlay_body__25TZB\"};","import React from \"react\";\n\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport AboutOverlay from \"./AboutOverlay\";\n\nafterEach(cleanup);\n\ndescribe(\"SocialApp\", () => {\n  test(\"close button works\", () => {\n    const closeFn = jest.fn();\n\n    render(<AboutOverlay close={closeFn} />);\n\n    const closebutton = screen.queryByText(\"x\");\n\n    fireEvent.click(closebutton);\n\n    expect(closeFn).toHaveBeenCalled();\n  });\n\n  test(\"all text appears correctly\", () => {\n    render(<AboutOverlay close={jest.fn()} />);\n\n    expect(\n      screen.queryAllByText(\n        /Brunel's Network is a visual representation of the network of people involved in the conception/\n      )\n    ).toBeTruthy();\n\n    expect(screen.queryAllByText(/This project seeks to evaluate the relationships between/)).toBeTruthy();\n\n    expect(\n      screen.queryAllByText(/The baseline network was derived from material held in the Brunel Institute/)\n    ).toBeTruthy();\n\n    expect(screen.queryAllByText(/The sources used in this project are highly variegated/)).toBeTruthy();\n  });\n});\n","// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\n\n// Brunel components\nimport ForceGraph from \"./components/ForceGraph\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport TextButton from \"./components/TextButton\";\nimport LabelButton from \"./components/LabelButton\";\nimport HowDoIOverlay from \"./components/HowDoIOverlay\";\nimport Overlay from \"./components/Overlay\";\nimport SearchBar from \"./components/SearchBar\";\nimport BioOverlay from \"./components/BioOverlay\";\nimport ShipOverlay from \"./components/ShipOverlay\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport MainMenu from \"./components/MainMenu\";\nimport WarningOverlay from \"./components/WarningOverlay\";\nimport KeyDatesBox from \"./components/KeyDatesBox\";\nimport PlayPause from \"./components/PlayPause\";\n\nimport HBox from \"./components/HBox\";\nimport VBox from \"./components/VBox\";\nimport BigBox from \"./components/BigBox\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graphData from \"./socialNetwork.json\";\nimport positionGroups from \"./data/positionGroups.json\";\nimport imageData from \"./images.json\";\n\nimport gw_text from \"./gw_text.md\";\nimport gb_text from \"./gb_text.md\";\nimport ge_text from \"./ge_text.md\";\nimport help_text from \"./help_text.md\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\n\nimport { score_by_connections, score_by_influence } from \"./model/ScoringFunctions\";\n\nimport { size_by_connections, size_by_influence, size_by_weight } from \"./model/SizingFunctions\";\nimport { faRulerHorizontal } from \"@fortawesome/free-solid-svg-icons\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graphData);\n\n    if (!(social instanceof Social)) {\n      console.error(\"Could not parse!\");\n      social = new Social();\n    }\n\n    this.updateSize = this.updateSize.bind(this);\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n      commercialFiltered: false,\n      engineersFiltered: false,\n      spiralOrder: \"Influence\",\n      nodeSize: \"Influence\",\n      commercialNodeFilter: [],\n      engineerNodeFilter: [],\n      connectedNodes: null,\n      selectedShip: null,\n      selectedShipID: null,\n      isOverlayOpen: false,\n      searchText: \"\",\n      searchIncludeBios: true,\n      searchHighlightLinks: false,\n      menuVisible: false,\n      height: 0,\n      width: 0,\n      date_index: 0,\n      warningVisible: true,\n    };\n\n\n    try {\n      Object.keys(imageData).forEach((key) => {\n        social.setImage(key, imageData[key][0], imageData[key][1]);\n     });\n    } catch (error) {\n      console.log(\"CANNOT ADD IMAGE!\");\n      console.log(error);\n    }\n\n    console.log(social);\n\n    const gwr = social.getProjects().getByName(\"GWR\");\n\n    // make sure that we start showing only the Great Western\n    this.state.social.toggleFilter(gwr);\n\n    this.spiralOrders = Object.freeze({\n      Connections: score_by_connections,\n      Influence: score_by_influence,\n    });\n\n    this.nodeSizes = Object.freeze({\n      Influence: size_by_influence,\n      Connections: size_by_connections,\n    });\n\n    this.state.social.setSizingFunction(size_by_weight);\n\n    // Find the investors and engineers for easy filtering\n    // This requires the\n    this.findInvestorsAndEngineers();\n\n    this.state.social.setScoringFunction(score_by_influence);\n\n    this.slotSetDateIndex(0);\n\n    this.socialGraph = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  updateSize() {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    console.log(`WINDOW ${this.state.width}x${this.state.height}`);\n  }\n\n  slotSetAnchor(item) {\n    let social = this.state.social;\n\n    if (social.setAnchor(item)) {\n      this.setState({ social: social });\n    }\n  }\n\n  slotReadMore(item) {\n    this.setOverlay(\n      <BioOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        person={item}\n      />\n    );\n  }\n\n  slotShowShip(item) {\n    this.setOverlay(\n      <ShipOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        ship={item}\n      />\n    );\n  }\n\n  slotSetShip(item) {\n    if (!item._isAProjectObject) {\n      console.error(\"Cannot set item that is not a project.\");\n      return;\n    }\n\n    let social = this.state.social;\n    social.setFilter(\"project\", item);\n\n    social.setDefaultImage(social.getImage(item));\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({ selectedShip: item.getName(), selectedShipID: item.getID() });\n    this.setState({ social: social });\n  }\n\n  slotClearFilters() {\n    let social = this.state.social;\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    social.filterUnconnectedNodes(true);\n    social.filterNonContributingEngineers(true);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: false,\n      commercialFiltered: false,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n    });\n  }\n\n  toggleEngCommFilter() {\n    if (this.state.engineersFiltered) {\n      this.slotToggleFilterCommercial();\n    } else if (this.state.commercialFiltered) {\n      this.slotToggleFilterCommercial();\n    } else {\n      this.slotToggleFilterEngineer();\n    }\n  }\n\n  slotToggleNonContributingEngineers() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(!this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterNCEngineers: !this.state.filterNCEngineers,\n    });\n  }\n\n  slotToggleUnconnectedNodes() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(!this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterUnconnectedNodes: !this.state.filterUnconnectedNodes,\n    });\n  }\n\n  slotToggleFilterEngineer() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: !this.state.engineersFiltered,\n      commercialFiltered: false,\n    });\n  }\n\n  slotToggleFilterCommercial() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      commercialFiltered: !this.state.commercialFiltered,\n      engineersFiltered: false,\n    });\n  }\n\n  slotClicked(id) {\n    let social = this.state.social;\n\n    if (!id) {\n      let last_search = this.state.cachedSearch;\n\n      if (last_search === \"\") {\n        social.clearSelections();\n        social.clearHighlights();\n        this.setState({\n          social: social,\n          searchText: \"\",\n          cachedSearch: \"\",\n          searchWasItem: false,\n          selectedPerson: null,\n        });\n      } else {\n        this.performSearch(this.state.cachedSearch, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n      }\n    } else {\n      let item = social.get(id);\n\n      social.setSelected(id, true, true);\n      this.setState({\n        social: social,\n        searchText: item.getName(),\n        searchWasItem: true,\n        selectedPerson: item,\n      });\n    }\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  hasConnections(entity) {\n    return this.state.social.getConnections().gotConnections(entity.id);\n  }\n\n  findInvestorsAndEngineers() {\n    // Add nodes to the commercial or engineering groups. This\n    // creates filters that filter positions that we've matched\n    // as benig \"engineer\" or \"commercial\"\n    let commercialNodeFilter = this.state.commercialNodeFilter;\n    let engineerNodeFilter = this.state.engineerNodeFilter;\n\n    const social = this.state.social;\n\n    let positions = social.getPositions(false).items();\n\n    Object.keys(positions).forEach((name) => {\n      // Trim any extra characters or whitespace from the position string\n      const namedPosition = name\n        .toLowerCase()\n        .replace(/\\s/g, \"\")\n        .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n\n      // Here we need to check if they've already been saved to stop double counting\n      if (positionGroups[\"commercial\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!commercialNodeFilter.includes(positionID)) {\n          commercialNodeFilter.push(positionID);\n        }\n      }\n\n      if (positionGroups[\"engineering\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!engineerNodeFilter.includes(positionID)) {\n          engineerNodeFilter.push(positionID);\n        }\n      }\n    });\n  }\n\n  toggleSpiralOrder() {\n    const order = this.state.spiralOrder;\n\n    if (order === \"Influence\") {\n      this.setSpiralOrder(\"Connections\");\n    } else if (order === \"Connections\") {\n      this.setSpiralOrder(\"Influence\");\n    }\n  }\n\n  setSpiralOrder(order) {\n    if (order in this.spiralOrders) {\n      if (this.state.spiralOrder !== order) {\n        let social = this.state.social;\n        social.setScoringFunction(this.spiralOrders[order]);\n        this.setState({\n          social: social,\n          spiralOrder: order,\n        });\n      }\n    } else {\n      console.error(\"Invalid spiral order, valid orders are \", Object.keys(this.spiralOrders));\n    }\n  }\n\n  toggleNodeSize() {\n    const size = this.state.nodeSize;\n\n    if (size === \"Influence\") {\n      this.setNodeSize(\"Connections\");\n    } else if (size === \"Connections\") {\n      this.setNodeSize(\"Influence\");\n    }\n  }\n\n  setNodeSize(size) {\n    if (size in this.nodeSizes) {\n      if (this.state.nodeSize !== size) {\n        let social = this.state.social;\n        social.setSizingFunction(this.nodeSizes[size]);\n        this.setState({\n          social: social,\n          nodeSize: size,\n        });\n      }\n    } else {\n      console.error(\"Invalid sizing function, valid functions are \", Object.keys(this.nodeSizes));\n    }\n  }\n\n  setOverlay(item) {\n    this.setState({\n      overlayItem: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlayItem: null,\n    });\n  }\n\n  performSearch(text, include_bios, highlight_links) {\n    let social = this.state.social;\n\n    social.selectSearchMatching(text, include_bios, highlight_links);\n\n    this.setState({\n      social: social,\n      searchIncludeBios: include_bios,\n      searchHighlightLinks: highlight_links,\n      searchText: text,\n      searchWasItem: false,\n      cachedSearch: text,\n    });\n  }\n\n  slotCloseWarning() {\n    this.setState({ warningVisible: false });\n  }\n\n  slotShowMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  slotCloseMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  slotUpdateSearch(text) {\n    this.performSearch(text, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n  }\n\n  slotSearchBiosToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, toggled, this.state.searchHighlightLinks);\n    }\n  }\n\n  slotSearchHighlightToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, this.state.searchIncludeBios, toggled);\n    }\n  }\n\n  slotSetDateIndex(date_index) {\n    date_index = this.state.social.getKeyDates().wrapIndex(date_index);\n    let social = this.state.social;\n    social.setKeyDateFilter(date_index);\n    this.setState({date_index: date_index,\n                   social: social});\n  }\n\n  nextFrame(){\n    // find someone to highlight\n    let frame_count = this.state.frame_count;\n\n    if (!frame_count){\n      frame_count = 0;\n    }\n\n    frame_count += 1;\n\n    if (frame_count == 1){\n      //clear the current selection\n      this.slotClicked(null);\n      this.closeOverlay();\n    } else if (frame_count == 2){\n      // choose someone new to select\n      let social = this.state.social;\n      try{\n        let person = social.selectAtRandom();\n        this.slotClicked(person);\n      } catch(error) {\n        console.log(error);\n      }\n    } else if (frame_count == 3){\n      try{\n        let person = this.state.selectedPerson;\n\n        if (person){\n          this.slotReadMore(person);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    } else if (frame_count == 5){\n      let date_index = this.state.date_index;\n      this.slotSetDateIndex(date_index + 1);\n      frame_count = 0;\n    }\n\n    this.setState({frame_count: frame_count});\n  }\n\n  slotPlay() {\n    console.log(\"PLAY\");\n    if (this.interval){\n      return;\n    }\n\n    this.interval = setInterval(()=>{this.nextFrame()}, 3000);\n  }\n\n  slotPause() {\n    console.log(\"PAUSE\");\n    if (this.interval){\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  }\n\n  toggleOverlay() {\n    this.setState({ isOverlayOpen: !this.state.isOverlayOpen });\n  }\n\n  resetAll() {\n    window.location.reload(true);\n  }\n\n  render() {\n\n    let graph = (\n      <ForceGraph\n        social={this.state.social}\n        selected={this.state.selected_item}\n        highlighted={this.state.highlighted_item}\n        signalClicked={(id) => this.slotClicked(id)}\n        emitSetCenter={(id) => {\n          this.slotSetAnchor(id);\n        }}\n        emitReadMore={(id) => {\n          this.slotReadMore(id);\n        }}\n      />\n    );\n\n    let overlay = null;\n    if (this.state.isOverlayOpen) {\n      overlay = (\n        <Overlay\n          toggleOverlay={() => {\n            this.toggleOverlay();\n          }}\n        >\n          {this.state.overlayItem}\n        </Overlay>\n      );\n    }\n\n    return (\n      <div>\n        <div className={styles.ui_main}>\n          <VBox>\n            <BigBox>\n              <div className={styles.fullscreen}>{graph}</div>\n            </BigBox>\n            <KeyDatesBox \n              social={this.state.social}\n              index={this.state.date_index}\n              signalSetDateIndex={(date_index) => this.slotSetDateIndex(date_index)}\n            />\n            <PlayPause signalPlay={()=>this.slotPlay()}\n                       signalPause={()=>this.slotPause()} />\n          </VBox>\n        </div>\n        {overlay}\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BioOverlay_container__JNbgi\",\"closeButton\":\"BioOverlay_closeButton__3kwkz\",\"image\":\"BioOverlay_image__pKZRH\",\"image_credit\":\"BioOverlay_image_credit__2VCbi\",\"caption\":\"BioOverlay_caption__2KwLl\",\"content\":\"BioOverlay_content__3SQpI\",\"panel\":\"BioOverlay_panel__SrUJP\",\"name\":\"BioOverlay_name__xj4_r\",\"bio_heading\":\"BioOverlay_bio_heading__3FtQQ\",\"source_heading\":\"BioOverlay_source_heading__1d7iI\",\"bio\":\"BioOverlay_bio__1QjHO\",\"source\":\"BioOverlay_source__3hOOX\",\"source_name\":\"BioOverlay_source_name__LdNo7\",\"source_item\":\"BioOverlay_source_item__6TCmp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"KeyDatesBox_box__2LwLW\",\"textbox\":\"KeyDatesBox_textbox__2k4W1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleText\":\"MainMenu_titleText__3DZVN\",\"panel\":\"MainMenu_panel__2B8MV\",\"menu_label\":\"MainMenu_menu_label__bAmr2\",\"menu_button\":\"MainMenu_menu_button__Kt0uL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__3n4WI\",\"overlayNoBackground\":\"Overlay_overlayNoBackground__17dWq\",\"container\":\"Overlay_container__Mgt_A\"};","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BioOverlay from \"./BioOverlay\";\nimport Overlay from \"./Overlay\";\n\nclass OverlayWrapper extends React.Component {\n  render() {\n    const sourceButtonText = this.props.sourceButtonText;\n    const socialSources = this.props.social.getSources();\n\n    if (!this.props.sourceIDs) {\n      return null;\n    }\n\n    let overlay = null;\n    if (this.props.isOverlayOpen && this.props.isBioOverlayOpen) {\n      overlay = (\n        <Overlay toggleOverlay={this.props.toggleOverlay}>\n          <BioOverlay\n            sources={socialSources}\n            person={this.props.entity}\n            social={this.props.social}\n            toggleOverlay={this.props.toggleOverlay}\n            toggleSourceOverlay={this.props.toggleSourceOverlay}\n            sourceButtonText={sourceButtonText}\n          />\n        </Overlay>\n      );\n    }\n\n    return overlay;\n  }\n}\n\nOverlayWrapper.propTypes = {\n  entity: PropTypes.object.isRequired,\n  isBioOverlayOpen: PropTypes.bool.isRequired,\n  isOverlayOpen: PropTypes.bool.isRequired,\n  isSourceOverlayOpen: PropTypes.bool.isRequired,\n  social: PropTypes.object.isRequired,\n  sourceButtonText: PropTypes.string.isRequired,\n  sourceIDs: PropTypes.array.isRequired,\n  toggleBioOverlay: PropTypes.func.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  toggleSourceOverlay: PropTypes.func.isRequired,\n};\n\nexport default OverlayWrapper;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"PlayPause_box__2iian\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SearchBar_form__3-Lq7\",\"searchBar\":\"SearchBar_searchBar__W2Qbi\",\"input\":\"SearchBar_input__3Mb6o\",\"clearButton\":\"SearchBar_clearButton__12EQd\",\"linkButton\":\"SearchBar_linkButton__3mGVL\",\"linkButtonHighlighted\":\"SearchBar_linkButtonHighlighted__2Tyc2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ShipOverlay_container__3pB6b\",\"closeButton\":\"ShipOverlay_closeButton__126fc\",\"image\":\"ShipOverlay_image__3BgoG\",\"content\":\"ShipOverlay_content__UIhDk\",\"name\":\"ShipOverlay_name__2KJnm\",\"bio\":\"ShipOverlay_bio__EX0YP\",\"markdown\":\"ShipOverlay_markdown__Droyi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","import React from \"react\";\n\n// import react-testing methods\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\n\n// add custom jest matchers from jest-dom\nimport \"@testing-library/jest-dom/extend-expect\";\n\n// the component to test\nimport TextButton from \"./TextButton\";\n\nafterEach(cleanup);\n\ndescribe(\"TextButton\", () => {\n  it(\"Renders and is clickable\", () => {\n    const testFn = jest.fn();\n    const testString = \"Some test text\";\n\n    render(<TextButton onClick={testFn}>{testString}</TextButton>);\n\n    expect(screen.queryByText(testString)).toBeInTheDocument();\n\n    fireEvent.click(screen.queryByText(testString).closest(\"button\"));\n\n    expect(testFn).toHaveBeenCalled();\n  });\n});\n","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./ToggleButton.module.css\";\n\n\nclass ToggleButton extends React.Component {\n\n  render() {\n\n    let emitToggled = null;\n\n    if (this.props.emitToggled) {\n      emitToggled = this.props.emitToggled;\n    } else {\n      emitToggled = () => null;\n    }\n\n    let toggled = this.props.toggled;\n\n    if (toggled) {\n      return (\n        <div className={styles.toggled}\n          onClick={() => { emitToggled(false) }} >\n          {this.props.children}\n        </div>);\n    }\n    else {\n      return (\n        <div className={styles.untoggled}\n          onClick={() => { emitToggled(true) }} >\n          {this.props.children}\n        </div>);\n    }\n  }\n}\n\nToggleButton.propTypes = {\n  children: PropTypes.any.isRequired,\n  emitToggled: PropTypes.func.isRequired,\n  toggled: PropTypes.bool.isRequired,\n};\n\nexport default ToggleButton;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggled\":\"ToggleButton_toggled__vSC4i\",\"untoggled\":\"ToggleButton_untoggled__1WAc8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"WarningOverlay_container__zI85t\",\"content\":\"WarningOverlay_content__1giRX\"};","module.exports = __webpack_public_path__ + \"static/media/gb_text.c99f7783.md\";","module.exports = __webpack_public_path__ + \"static/media/ge_text.8f5b7317.md\";","module.exports = __webpack_public_path__ + \"static/media/gw_text.5f051736.md\";","module.exports = __webpack_public_path__ + \"static/media/help_text.3d4f9b98.md\";","import Dry from \"json-dry\";\n\nimport Affiliations from \"./Affiliations\";\nimport Affiliation from \"./Affiliation\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is an affiliation\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Affiliation({ name: name1, url: url1 });\n\n  let name2 = \"This is another affiliation\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Affiliation({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Affiliations();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\n\nimport Businesses from \"./Businesses\";\nimport Business from \"./Business\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a business\";\n\n  let p1 = new Business({ name: name1 });\n\n  let name2 = \"This is another business\";\n\n  let p2 = new Business({ name: name2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Businesses();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import DateRange from \"./DateRange\";\nimport RoughDate from \"./RoughDate\";\n\ntest(\"simple\", () => {\n  let a = new DateRange();\n  expect(a.hasBounds()).toStrictEqual(false);\n  expect(a.hasStart()).toStrictEqual(false);\n  expect(a.hasEnd()).toStrictEqual(false);\n\n  a = new DateRange({ start: \"1850-12-02\", end: \"1850-12-01\" });\n\n  expect(a.getStartDate() < a.getEndDate()).toStrictEqual(true);\n  expect(a.hasBounds()).toStrictEqual(true);\n  expect(a.hasStart()).toStrictEqual(true);\n  expect(a.hasEnd()).toStrictEqual(true);\n  expect(a.getEndDate() - a.getStartDate()).toStrictEqual(24 * 60 * 60 * 1000);\n  expect(RoughDate.delta(a.getEnd(), a.getStart())).toStrictEqual(24 * 60 * 60 * 1000);\n\n  let b = new DateRange({ start: \"1850-12-02\", end: \"1852-01-01\" });\n\n  expect(DateRange.eq(a, a)).toStrictEqual(true);\n  expect(DateRange.eq(b, b)).toStrictEqual(true);\n  expect(DateRange.eq(a, b)).toStrictEqual(false);\n\n  let c = new DateRange({ start: \"1850-12-02\", end: \"1850-12-01\" });\n\n  expect(DateRange.eq(a, c)).toStrictEqual(true);\n  expect(DateRange.eq(c, a)).toStrictEqual(true);\n\n  let d = DateRange.clone(b);\n\n  expect(DateRange.eq(b, d)).toStrictEqual(true);\n  expect(DateRange.eq(c, d)).toStrictEqual(false);\n});\n\ntest(\"intersect\", () => {\n  let a = new DateRange({ start: \"1850-01-31\", end: \"1850-12-31\" });\n  let b = new DateRange({ start: \"1849-01-31\", end: \"1850-07-31\" });\n  let intersect = new DateRange({ start: \"1850-01-31\", end: \"1850-07-31\" }).toString();\n\n  expect(a.intersect(b).toString()).toStrictEqual(intersect);\n  expect(b.intersect(a).toString()).toStrictEqual(intersect);\n\n  let union = new DateRange({ start: \"1849-01-31\", end: \"1850-12-31\" }).toString();\n  expect(a.union(b).toString()).toStrictEqual(union);\n  expect(b.union(a).toString()).toStrictEqual(union);\n\n  let c = new RoughDate({ start: \"1841-01-01\", end: \"1841-12-31\" });\n  let d = new DateRange({ start: \"1839-12-08\", end: \"1841-01-17\" });\n\n  intersect = new DateRange({ start: \"1841-01-01\", end: \"1841-01-17\" }).toString();\n  console.log(intersect);\n  expect(d.intersect(c).toString()).toStrictEqual(intersect);\n});\n","import Dry from \"json-dry\";\n\nimport Positions from \"./Positions\";\nimport Position from \"./Position\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a position\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Position({ name: name1, url: url1 });\n\n  let name2 = \"This is another position\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Position({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Positions();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\n\nimport Projects from \"./Projects\";\nimport Project from \"./Project\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a project\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Project({ name: name1, url: url1 });\n\n  let name2 = \"This is another project\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Project({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getURL()).toStrictEqual(url1);\n  expect(p2.getURL()).toStrictEqual(url2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Projects();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import RoughDate from \"./RoughDate\";\nimport DateRange from \"./DateRange\";\n\ntest(\"simple\", () => {\n  let a = new RoughDate({ start: \"1850-01-01\", end: \"1850-12-31\" });\n  let b = new RoughDate({ start: \"1851-01-01\", end: \"1851-12-31\" });\n\n  expect(a.getEarliest().toString()).toStrictEqual(RoughDate.min(a, b).toString());\n  expect(b.getLatest().toString()).toStrictEqual(RoughDate.max(a, b).toString());\n\n  expect(RoughDate.eq(a, a)).toStrictEqual(true);\n  expect(RoughDate.eq(b, b)).toStrictEqual(true);\n  expect(RoughDate.eq(a, b)).toStrictEqual(false);\n\n  let c = new RoughDate({ start: \"1850-01-01\", end: \"1850-12-31\" });\n\n  expect(RoughDate.eq(a, c)).toStrictEqual(true);\n  expect(RoughDate.eq(c, a)).toStrictEqual(true);\n\n  let d = RoughDate.clone(b);\n\n  expect(RoughDate.eq(b, d)).toStrictEqual(true);\n  expect(RoughDate.eq(c, d)).toStrictEqual(false);\n});\n\ntest(\"intersect\", () => {\n  let a = new RoughDate({ start: \"1823-01-01\", end: \"1833-12-31\" });\n  let b = new DateRange({ start: \"1830-01-01\", end: \"1860-01-01\" });\n\n  let intersect = new DateRange({ start: \"1830-01-01\", end: \"1833-12-31\" });\n\n  expect(b.intersect(a).toString()).toStrictEqual(intersect.toString());\n\n  let m1 = a.toDateRange().getStart();\n  let m2 = b.getStart();\n\n  expect(RoughDate.max(m1, m2).toString()).toStrictEqual(m2.toString());\n});\n\ntest(\"minmax\", () => {\n  let a = new RoughDate({ start: \"1841-01-01\", end: \"1841-12-31\" });\n  let b = new RoughDate(\"1839-12-08\");\n\n  expect(RoughDate.min(a, b).toString()).toStrictEqual(b.toString());\n  expect(RoughDate.max(a, b).toString()).toStrictEqual(a.getLatest().toString());\n});\n","import Dry from \"json-dry\";\n\nimport Sources from \"./Sources\";\nimport Source from \"./Source\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a source\";\n  let p1 = new Source({ name: name1 });\n\n  let name2 = \"This is another source\";\n  let p2 = new Source({ name: name2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Sources();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  // Returns a DateRange object\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./BigBox.module.css\";\n\n\nclass BigBox extends React.Component {\n    render(){\n        return (\n            <div className={styles.bigbox}>\n                {this.props.children}\n            </div>);\n    }\n}\n\n\nBigBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default BigBox;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./VBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\n\nclass VBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.vbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nVBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default VBox;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./HBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\nclass HBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.hbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nHBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default HBox;\n","module.exports = __webpack_public_path__ + \"static/media/Overlay.test.js.cd63628b.snap\";","module.exports = __webpack_public_path__ + \"static/media/ShipSelector.test.js.f95a6205.snap\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAPAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAgACAAwERAAIRAQMRAf/EAFIAAQEAAAAAAAAAAAAAAAAAAAAIAQEAAAAAAAAAAAAAAAAAAAAAEAABBAMAAAAAAAAAAAAAAADwATFBUaECIhEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AppNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwH//2Q==\"","module.exports = __webpack_public_path__ + \"static/media/engine_shed.2b621b03.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Brunel.eed64ecd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Bryan_Donkin.e51fd58c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Christopher_Claxton.ac353b13.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Edward_Chappel.9d8c9fdf.jpg\";","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  //   toUnixTimestamp() {\n  //     return parseInt((this.toDate().getTime() / 1000).toFixed(0));\n  //   }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw new ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","module.exports = __webpack_public_path__ + \"static/media/John_Grantham.fb146611.jpg\";","module.exports = __webpack_public_path__ + \"static/media/John_Scott.01d67396.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Robert_Bright.c0731a3c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Samuel_Hall.522bb947.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Thomas_Guppy.ecbe6baa.jpg\";","module.exports = __webpack_public_path__ + \"static/media/William_Fairbairn.66f3ebae.jpg\";","module.exports = __webpack_public_path__ + \"static/media/William_Patterson.58f920dd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/William_Symonds.a46054c2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Britain.6235a4a6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Eastern.0757fd23.jpg\";","\n/** Return the ID number of the passed node. This is used to\n *  standardise how I get IDs. It will first try 'getID()',\n * then, if that fails, .id, and will then return the object\n * itself\n */\nexport default function get_id(node) {\n  if (node === null) {\n    return null;\n  } else if (node.getID) {\n    return node.getID();\n  } else if (node.id) {\n    return node.id;\n  } else {\n    return node;\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/Great_Western.bab3c03f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ssgb_logo.ee48e16d.png\";","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./TextButton.module.css\";\n\n\nclass TextButton extends React.Component {\n\n  render() {\n\n    let onClick = null;\n\n    if (this.props.onClick) {\n      onClick = this.props.onClick;\n    } else {\n      onClick = () => null;\n    }\n\n    return (\n      <button className={styles.button} onClick={onClick}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n\nTextButton.propTypes = {\n  children: PropTypes.any,\n  onClick: PropTypes.func,\n};\n\nexport default TextButton;\n"],"sourceRoot":""}